<!-- 
  Main HTML file for the Paramedic Quick Reference app.
  It defines the base structure of the single-page application and includes 
  all required scripts and styles. This file contains the layout (navigation, 
  Patient Info sidebar, content area) and links to the external JavaScript modules.
-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Paramedic Quick Reference</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root { --vh: 1vh; }
        body {
            font-family: 'Inter', sans-serif;
            overscroll-behavior-y: contain; /* Prevents pull-to-refresh on mobile */
            display: flex;
            flex-direction: column;
            min-height: calc(var(--vh, 1vh) * 100);
        }
        #patient-sidebar {
            position: fixed; top: 0; left: 0; width: 300px; max-width: 80%; height: calc(var(--vh, 1vh) * 100);
            background-color: #f9fafb; /* gray-50 */ border-right: 1px solid #e5e7eb; /* gray-200 */
            padding: 1rem; overflow-y: auto; z-index: 100; transform: translateX(-100%);
            transition: transform 0.3s ease-in-out; box-shadow: 2px 0 10px rgba(0,0,0,0.1);
        }
        #patient-sidebar.open { transform: translateX(0); }
        #sidebar-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: rgba(0, 0, 0, 0.5); z-index: 99;
            opacity: 0; visibility: hidden;
            transition: opacity 0.3s ease-in-out, visibility 0.3s ease-in-out;
        }
        #sidebar-overlay.active { opacity: 1; visibility: visible; }
        #app-container { display: flex; flex-direction: column; flex-grow: 1; width: 100%; transition: margin-left 0.3s ease-in-out; }

        /* Hierarchical List Styles */
        .category-item > .category-header {
            display: flex; justify-content: space-between; align-items: center;
            padding: 0.75rem 1rem; background-color: #f3f4f6; /* gray-100 */
            border: 1px solid #e5e7eb; /* gray-200 */ border-radius: 0.375rem; cursor: pointer;
            font-weight: 500; transition: background-color 0.2s;
        }
        .category-item > .category-header:hover { background-color: #e5e7eb; /* gray-200 */ }
        .category-children {
            display: none; padding-left: 1rem; /* Indentation */ margin-top: 0.25rem;
            border-left: 2px solid #d1d5db; /* gray-300 */
        }
        .category-item.expanded > .category-children { display: block; }
        .category-item.expanded > .category-header .icon-toggle-open { display: inline-block; }
        .category-item.expanded > .category-header .icon-toggle-closed { display: none; }
        .icon-toggle-open { display: none; } .icon-toggle-closed { display: inline-block; }

        .topic-link-item {
            display: block; padding: 0.6rem 1rem; background-color: #ffffff;
            border: 1px solid #e5e7eb; border-radius: 0.375rem; margin-top: 0.25rem;
            cursor: pointer; transition: background-color 0.2s, transform 0.1s;
        }
        .topic-link-item:hover { background-color: #e0f2fe; /* sky-100 */ }
        .topic-link-item:active { transform: scale(0.98); }
        .topic-link-item.recently-viewed { background-color: #fef3c7; }
        .strikethrough {
            text-decoration: line-through;
            color: #6b7280; /* gray-500 */
        }
        .search-topic-item {
            padding: 0.75rem 1rem; background-color: #f9fafb; border-radius: 0.375rem;
            cursor: pointer; border: 1px solid #e5e7eb; margin-bottom: 0.5rem;
        }
        .search-topic-item:hover { background-color: #e0f2fe; }

        .sidebar-input {
            width: 100%;
            padding: 0.5rem;
            border: 1px solid #d1d5db; /* gray-300 */
            border-radius: 0.375rem; /* rounded-md */
            font-size: 0.875rem; /* text-sm */
            line-height: 1.25rem;
            outline: none;
        }
        .sidebar-input:focus {
            box-shadow: 0 0 0 2px #3b82f6; /* ring-2 ring-blue-500 */
            border-color: #3b82f6; /* border-blue-500 */
        }
        .sidebar-label {
            display: block;
            font-size: 0.875rem; /* text-sm */
            line-height: 1.25rem;
            font-weight: 500; /* font-medium */
            color: #374151; /* gray-700 */
            margin-bottom: 0.25rem; /* mb-1 */
        }
        .sidebar-section {
            margin-top: 1rem; /* mt-4 */
            padding-top: 1rem; /* pt-4 */
            border-top: 1px solid #e5e7eb; /* border-gray-200 */
        }
        .sidebar-section-title {
            font-size: 1.125rem; /* text-lg */
            font-weight: 600; /* font-semibold */
            color: #2563eb; /* blue-600 */
            margin-bottom: 0.5rem; /* mb-2 */
        }

        /* Autocomplete Styles */
        .autocomplete-container { position: relative; }
        .autocomplete-suggestions {
            position: absolute; border: 1px solid #d1d5db; /* gray-300 */
            border-top: none; z-index: 101; /* Above sidebar content, below modal if any */
            max-height: 150px; overflow-y: auto;
            background-color: white; width: 100%;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1); border-radius: 0 0 0.375rem 0.375rem;
        }
        .autocomplete-suggestion-item {
            padding: 0.5rem; cursor: pointer;
            font-size: 0.875rem; /* text-sm */
        }
        .autocomplete-suggestion-item:hover { background-color: #e0f2fe; /* sky-100 */ }
        .hidden { display: none !important; }


        /* Medication Detail Page Styles */
        .detail-section { margin-bottom: 1rem; }
        .detail-section-title {
            font-size: 1rem; /* text-base */
            font-weight: 600; /* font-semibold */
            color: #1d4ed8; /* blue-700 */
            border-bottom: 1px solid #bfdbfe; /* border-blue-200 */
            padding-bottom: 0.25rem; /* pb-1 */
            margin-bottom: 0.5rem; /* mb-2 */
        }
        .detail-list {
            list-style-type: disc;
            list-style-position: inside;
            padding-left: 0.5rem; /* pl-2 */
            color: #374151; /* gray-700 */
        }
        .detail-list li + li { margin-top: 0.25rem; /* space-y-1 */ }
        .detail-text {
            color: #374151; /* gray-700 */
            white-space: pre-wrap;
        }
        .med-concentration {
            font-size: 0.875rem; /* text-sm */
            line-height: 1.25rem;
            color: #6b7280; /* gray-500 */
            margin-left: 0.5rem; /* ml-2 */
        }

        .toggle-info {
            color: #15803d;
            cursor: pointer;
            text-decoration-line: underline;
            text-decoration-color: #15803d;
            text-underline-offset: 2px;
        }
        .toggle-info:hover {
            color: #065f46;
            background-color: #d1fae5;
        }
        .toggle-info .info-text { margin-left: 0.25rem; }
        .toggle-category { cursor: pointer; display: flex; justify-content: space-between; align-items: center; }
        .arrow { transition: transform 0.2s; margin-left: 0.25rem; }
        .arrow.rotate { transform: rotate(-180deg); }


        /* Header Navigation Buttons */
        .header-nav-button {
            padding: 0.5rem; /* p-2 */
            border-radius: 0.375rem; /* rounded-md */
            color: #ffffff; /* text-white */
        }
        .header-nav-button:hover { background-color: #1d4ed8; /* bg-blue-700 */ }
        .header-nav-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        /* Warning Messages Styling */
        .warning-box {
            margin-top: 1rem; /* my-4 */
            margin-bottom: 1rem;
            padding: 0.75rem; /* p-3 */
            border: 1px solid #d1d5db; /* border */
            border-radius: 0.375rem; /* rounded-md */
            font-size: 0.875rem; /* text-sm */
        }
        .warning-box > * + * { margin-top: 0.5rem; /* space-y-2 */ }
        .warning-box-red {
            border-color: #f87171; /* border-red-400 */
            background-color: #fef2f2; /* bg-red-50 */
            color: #b91c1c; /* text-red-700 */
        }
        .warning-box-orange {
            border-color: #fb923c; /* border-orange-400 */
            background-color: #fff7ed; /* bg-orange-50 */
            color: #c2410c; /* text-orange-700 */
        }
        .warning-box-yellow {
            border-color: #facc15; /* border-yellow-400 */
            background-color: #fefce8; /* bg-yellow-50 */
            color: #713f12; /* text-yellow-800 */
        }
        .warning-box div { display: flex; align-items: flex-start; }
        .warning-box svg {
            width: 1.25rem; /* w-5 */
            height: 1.25rem; /* h-5 */
            margin-right: 0.5rem; /* mr-2 */
            flex-shrink: 0;
        }


        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; border-radius: 10px; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
    </style>
<script>
  function setVh() {
    const vh=window.innerHeight*0.01;
    document.documentElement.style.setProperty("--vh", `${vh}px`);
  }
  window.addEventListener("resize", setVh);
  setVh();
</script>
</head>
<body class="bg-gray-100">
<h1 class="sr-only">Paramedic Quick Reference</h1>
    <aside id="patient-sidebar">
        <div class="flex justify-between items-center mb-4">
            <h2 class="text-xl font-semibold text-blue-700">Patient Info</h2>
            <button id="close-sidebar-button" class="p-1 rounded-md hover:bg-gray-200" aria-label="Close Patient Info">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 text-gray-600"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" /></svg>
            </button>
        </div>
        <div><label for="pt-age" class="sidebar-label">Age (Years):</label><input type="number" id="pt-age" class="sidebar-input" placeholder="e.g., 35"></div>
        <div class="mt-3">
            <label for="pt-weight" class="sidebar-label">Weight:</label>
            <div class="flex space-x-2"><input type="number" id="pt-weight" class="sidebar-input w-2/3" placeholder="e.g., 70"><select id="pt-weight-unit" class="sidebar-input w-1/3"><option value="kg">kg</option><option value="lbs">lbs</option></select></div>
        </div>
        <div class="mt-3 autocomplete-container">
            <label for="pt-pmh" class="sidebar-label">Past Medical History (PMH):</label>
            <textarea id="pt-pmh" class="sidebar-input" rows="2" placeholder="Type or select, comma separated..."></textarea>
            <div id="pt-pmh-suggestions" class="autocomplete-suggestions hidden"></div>
        </div>
        <div class="mt-3 autocomplete-container">
            <label for="pt-allergies" class="sidebar-label">Allergies:</label>
            <textarea id="pt-allergies" class="sidebar-input" rows="2" placeholder="Type or select, comma separated..."></textarea>
            <div id="pt-allergies-suggestions" class="autocomplete-suggestions hidden"></div>
        </div>
        <div class="mt-3 autocomplete-container">
            <label for="pt-medications" class="sidebar-label">Current Medications:</label>
            <textarea id="pt-medications" class="sidebar-input" rows="2" placeholder="Type or select, comma separated..."></textarea>
            <div id="pt-medications-suggestions" class="autocomplete-suggestions hidden"></div>
        </div>
        <div class="mt-3 autocomplete-container">
            <label for="pt-indications" class="sidebar-label">Indications:</label>
            <textarea id="pt-indications" class="sidebar-input" rows="2" placeholder="Type or select, comma separated..."></textarea>
            <div id="pt-indications-suggestions" class="autocomplete-suggestions hidden"></div>
        </div>
        <div class="mt-3 autocomplete-container">
            <label for="pt-symptoms" class="sidebar-label">Signs/Symptoms (S/S):</label>
            <textarea id="pt-symptoms" class="sidebar-input" rows="3" placeholder="Type or select, comma separated..."></textarea>
            <div id="pt-symptoms-suggestions" class="autocomplete-suggestions hidden"></div>
        </div>
        <div class="sidebar-section">
            <h3 class="sidebar-section-title">Vital Signs (VS)</h3>
            <div class="grid grid-cols-2 gap-x-3 gap-y-2">
                <div><label for="vs-bp" class="sidebar-label">BP (e.g. 120/80):</label><input type="text" id="vs-bp" class="sidebar-input" placeholder="120/80"></div>
                <div><label for="vs-hr" class="sidebar-label">HR:</label><input type="number" id="vs-hr" class="sidebar-input" placeholder="70"></div>
                <div><label for="vs-spo2" class="sidebar-label">SpO2 (%):</label><input type="number" id="vs-spo2" class="sidebar-input" placeholder="98"></div>
                <div><label for="vs-etco2" class="sidebar-label">ETCO2:</label><input type="number" id="vs-etco2" class="sidebar-input" placeholder="38"></div>
                <div><label for="vs-rr" class="sidebar-label">RR:</label><input type="number" id="vs-rr" class="sidebar-input" placeholder="16"></div>
                <div><label for="vs-bgl" class="sidebar-label">BGL:</label><input type="text" id="vs-bgl" class="sidebar-input" placeholder="90 or HI"></div>
                <div><label for="vs-eyes" class="sidebar-label">Eyes:</label><input type="text" id="vs-eyes" class="sidebar-input" placeholder="PERRL"></div>
                <div><label for="vs-gcs" class="sidebar-label">GCS:</label><input type="number" id="vs-gcs" class="sidebar-input" placeholder="15"></div>
            </div>
            <div class="mt-2"><label for="vs-ao-status" class="sidebar-label">ao-Status:</label><input type="text" id="vs-ao-status" class="sidebar-input" placeholder="x4, Confused"></div>
            <div class="mt-2"><label for="vs-lung-sounds" class="sidebar-label">Lung Sounds:</label><textarea id="vs-lung-sounds" class="sidebar-input" rows="2" placeholder="Clear B/L, Wheezes"></textarea></div>
        </div>
        <div class="sidebar-section">
            <h3 class="sidebar-section-title">EKG</h3><textarea id="pt-ekg" class="sidebar-input" rows="3" placeholder="Placeholder for EKG findings..."></textarea>
        </div>
    </aside>
    <div id="sidebar-overlay"></div>

    <div id="app-container">
        <header class="bg-blue-600 text-white p-4 sticky top-0 z-40 shadow-md">
            <div class="container mx-auto flex items-center justify-between">
                <button id="open-sidebar-button" class="header-nav-button" aria-label="Open Patient Info Sidebar">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" /></svg>
                </button>
                <h1 class="text-lg sm:text-xl md:text-2xl font-semibold text-center flex-grow px-2">Paramedic Quick Ref</h1>
                <div class="flex items-center space-x-1">
                    <button id="nav-back-button" class="header-nav-button" aria-label="Navigate Back" title="Back" disabled>
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5L8.25 12l7.5-7.5" /></svg>
                    </button>
                    <button id="nav-forward-button" class="header-nav-button" aria-label="Navigate Forward" title="Forward" disabled>
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5" /></svg>
                    </button>
                </div>
            </div>
            <div class="mt-3">
                <input type="search" id="searchInput" placeholder="Search topics or medications..." class="w-full p-3 rounded-lg border-2 border-blue-400 text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-300 focus:border-blue-300" aria-label="Search Treatment Information">
            </div>
        </header>

        <main class="container mx-auto p-4 flex-grow">
            <div id="content-area" class="bg-white p-3 md:p-6 rounded-lg shadow-lg min-h-[calc(var(--vh,1vh)*100-200px)]">
                <p class="text-gray-500 text-center">Loading categories...</p>
            </div>
        </main>

 s',
  'medication-administration-cross-check-macc',
  'metoprolol-tartrate-lopressor',
  'mi-acs',
  'midazolam-versed',
  'minutes-of-oxygen-by-cylinder-size',
  'mono-vt-stable',
  'morphine',
  'mucosal-atomization-device-mad',
  'n-v',
  'naloxone-narcan',
  'nasal-intubation',
  'normal-delivery',
  'ntg',
  'ob-gyn',
  'on-scene-authority',
  'on-scene-healthcare-professionals',
  'ondansetron-zofran',
  'operational-protocols',
  'other-abbreviations',
  'pain',
  'pcr-requirements',
  'pea-asystole',
  'pediatric-assessment-vs',
  'pediatric-protocols',
  'poly-vt-torsades-stable',
  'poly-vt-torsades-unstable',
  'prolapsed-cord',
  'pulmonary-edema',
  'push-dose-epi',
  'rass-1-through-4',
  'refusals',
  'rehabilitation-emergency-incidents-municipal-partners',
  'response-mode',
  'restraint-of-agitated-combative-patients',
  'richmond-agitation-sedation-scale-rass',
  'rosc-stabilization',
  'rule-of-9s-rule-of-palms-bsa-burn-estimation',
  'sai',
  'scope-violations-possible-consequences',
  'seizure',
  'sepsis',
  'shoulder-dystocia',
  'sickle-cell-crisis',
  'skills-equipment',
  'sludgem-pt',
  'smith-modified-sgarbossa-criteria',
  'smr',
  'special-needs-children',
  'stroke',
  'suspension-revocation',
  'svt-mono-vt-unstable',
  'svt-stable',
  'taser',
  'thermometer-braun-thermoscan',
  'toxic-ingestion-with-serious-s-s',
  'transfer-to-lesser-credential',
  'trauma',
  'understanding-ratios-percentages-solution-mixtures',
  'ventilator-pt-intubated-sedated',
  'ventilator-set-up-parapac-plus',
  'vf-pvt',
  'workers-compensation-process',
];       <footer class="text-center p-4 text-gray-500 text-sm mt-2">App Version 0.7</footer>
    </div>


    <script>
        // --- DOM Elements ---
        const searchInput = document.getElementById('searchInput');
        const contentArea = document.getElementById('content-area');
        const patientSidebar = document.getElementById('patient-sidebar');
        const openSidebarButton = document.getElementById('open-sidebar-button');
        const closeSidebarButton = document.getElementById('close-sidebar-button');
        const sidebarOverlay = document.getElementById('sidebar-overlay');
        const navBackButton = document.getElementById('nav-back-button');
        const navForwardButton = document.getElementById('nav-forward-button');

        function addTapListener(element, handler) {
            if (!element) return;
            const activate = (e) => {
                if (e.pointerType === 'mouse' && e.button !== 0) return;
                e.preventDefault();
                handler(e);
            };

            element.addEventListener('click', activate);
            element.addEventListener('keypress', function(e) {
                if (e.key === 'Enter' || e.key === ' ') {
                    activate(e);
                }
            });
        }


        ptInputs.forEach(input => { if (input) input.addEventListener('input', updatePatientData); });

        // --- Autocomplete Functionality ---
        function setupAutocomplete(textareaId, suggestionsContainerId, suggestionSourceSet) {
            const textarea = document.getElementById(textareaId);
            const suggestionsContainer = document.getElementById(suggestionsContainerId);
            let currentInputValueBeforeSelection = ""; // To manage appending correctly

            textarea.addEventListener('input', function(e) {
                const inputText = e.target.value;
                // Get the part of the input after the last comma, or the whole input if no comma
                const currentSegment = inputText.split(',').pop().trim().toLowerCase();
                currentInputValueBeforeSelection = inputText.substring(0, inputText.lastIndexOf(',') + 1).trim();
                if (currentSegment.length === 0) {
                    suggestionsContainer.classList.add('hidden');
                    suggestionsContainer.innerHTML = '';
                    return;
                }

                const filteredSuggestions = Array.from(suggestionSourceSet).filter(suggestion =>
                    suggestion.toLowerCase().includes(currentSegment)
                );

                if (filteredSuggestions.length > 0) {
                    suggestionsContainer.innerHTML = filteredSuggestions.map(s =>
                        `<div class="autocomplete-suggestion-item" data-value="${s}">${s}</div>`
                    ).join('');
                    suggestionsContainer.classList.remove('hidden');
                } else {
                    suggestionsContainer.classList.add('hidden');
                }
            });

            addTapListener(suggestionsContainer, function(e) {
                if (e.target.classList.contains('autocomplete-suggestion-item')) {
                    const selectedValue = e.target.dataset.value;
                    let existingValues = textarea.value.split(',').map(v => v.trim()).filter(v => v);
                    
                    // Remove the current typing segment before adding the new one
                    if (existingValues.length > 0 && textarea.value.trim().slice(-1) !== ',') {
                        existingValues.pop(); 
                    }

                    if (!existingValues.map(v => v.toLowerCase()).includes(selectedValue.toLowerCase())) {
                        existingValues.push(selectedValue);
                    }
                    
                    textarea.value = existingValues.join(', ') + (existingValues.length > 0 ? ", " : ""); // Add trailing comma for next entry
                    
                    suggestionsContainer.classList.add('hidden');
                    suggestionsContainer.innerHTML = '';
                    textarea.focus();
                    updatePatientData(); // Update patient data after selection
                }
            });

            textarea.addEventListener('blur', function() {
                // Delay hiding to allow click event on suggestions
                setTimeout(() => {
                    suggestionsContainer.classList.add('hidden');
                }, 150);
            });
             textarea.addEventListener('focus', function(e) { // Re-trigger suggestions on focus if there's text
                const inputText = e.target.value;
                const currentSegment = inputText.split(',').pop().trim().toLowerCase();
                 if (currentSegment.length > 0) {
                     const filteredSuggestions = Array.from(suggestionSourceSet).filter(suggestion =>
                        suggestion.toLowerCase().includes(currentSegment)
                    );
                    if (filteredSuggestions.length > 0) {
                        suggestionsContainer.innerHTML = filteredSuggestions.map(s =>
                            `<div class="autocomplete-suggestion-item" data-value="${s}">${s}</div>`
                        ).join('');
                        suggestionsContainer.classList.remove('hidden');
                    }
                 }
            });
        }


        // --- Navigation History Management (same as v0.6) ---
        function updateNavButtonsState() { navBackButton.disabled = currentHistoryIndex <= 0; navForwardButton.disabled = currentHistoryIndex >= navigationHistory.length - 1; }
        function addHistoryEntry(entry) { if (isNavigatingViaHistory) return; if (currentHistoryIndex < navigationHistory.length - 1) { navigationHistory = navigationHistory.slice(0, currentHistoryIndex + 1); } navigationHistory.push(entry); currentHistoryIndex = navigationHistory.length - 1; updateNavButtonsState(); }
        function navigateViaHistory(direction) { if ((direction === -1 && currentHistoryIndex <= 0) || (direction === 1 && currentHistoryIndex >= navigationHistory.length - 1)) return; isNavigatingViaHistory = true; currentHistoryIndex += direction; const state = navigationHistory[currentHistoryIndex]; if (state.viewType === 'list') { searchInput.value = state.contentId || ''; handleSearch(false, state.highlightTopicId, state.categoryPath || []); } else if (state.viewType === 'detail') { renderDetailPage(state.contentId, true, false); } updateNavButtonsState(); isNavigatingViaHistory = false; }
        addTapListener(navBackButton, () => navigateViaHistory(-1));
        addTapListener(navForwardButton, () => navigateViaHistory(1));

        // --- Hierarchical List Rendering (same as v0.6) ---
        function createHierarchicalList(items, container) { /* ... same as v0.6 ... */
             items.forEach(item => {
                const listItem = document.createElement('div'); listItem.className = 'py-1';
                if (item.type === 'category') {
                    listItem.classList.add('category-item');
                    listItem.dataset.categoryId = item.id;
                    const header = document.createElement('div'); header.className = 'category-header';
                    header.innerHTML = `<span>${item.title}</span><span class="icon-toggle"><svg class="w-5 h-5 icon-toggle-closed" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" /></svg><svg class="w-5 h-5 icon-toggle-open" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 12h-15" /></svg></span>`;
                    header.setAttribute('role', 'button'); header.setAttribute('aria-expanded', 'false'); header.setAttribute('tabindex', '0');
                    const childrenContainer = document.createElement('div'); childrenContainer.className = 'category-children';
                    addTapListener(header, () => { listItem.classList.toggle('expanded'); header.setAttribute('aria-expanded', listItem.classList.contains('expanded').toString()); });
                    header.addEventListener('keydown', (e) => { if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); listItem.classList.toggle('expanded'); header.setAttribute('aria-expanded', listItem.classList.contains('expanded').toString()); }});
                    listItem.appendChild(header); listItem.appendChild(childrenContainer);
                    if (item.children && item.children.length > 0) createHierarchicalList(item.children, childrenContainer);
                } else if (item.type === 'topic') {
                    const topicLink = document.createElement('a'); topicLink.className = 'topic-link-item';
                    topicLink.textContent = item.title; topicLink.href = `#${item.id}`; topicLink.dataset.topicId = item.id;
                    topicLink.setAttribute('role', 'button'); topicLink.setAttribute('tabindex', '0');
                    addTapListener(topicLink, (e) => { e.preventDefault(); renderDetailPage(item.id); });
                    topicLink.addEventListener('keydown', (e) => { if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); renderDetailPage(item.id); }});
                    listItem.appendChild(topicLink);
                }
                container.appendChild(listItem);
            });
        }


        // --- View Rendering Functions ---
        function renderInitialView(shouldAddHistory = true, highlightId = null, categoryPath = []) { /* ... same as v0.6 ... */
            if (shouldAddHistory) addHistoryEntry({ viewType: 'list', contentId: '', highlightTopicId: highlightId, categoryPath });
            contentArea.innerHTML = `<p class="text-gray-600 text-center mb-4 text-sm md:text-base">Use the <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 inline-block align-text-bottom"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" /></svg> button for patient info. Browse categories below or use search.</p><div id="hierarchical-list-container" class="space-y-2"></div>`;
            const listContainer = document.getElementById('hierarchical-list-container');
            if (paramedicCategories.length > 0) createHierarchicalList(paramedicCategories, listContainer);
            else listContainer.innerHTML = '<p class="text-gray-500 text-center">No categories available.</p>';
            openCategoriesAndHighlight(categoryPath, highlightId);
        }
        function renderSearchResults(filteredTopics, searchTerm, shouldAddHistory = true, highlightId = null, categoryPath = []) { /* ... same as v0.6 ... */
            if (shouldAddHistory) addHistoryEntry({ viewType: 'list', contentId: searchTerm, highlightTopicId: highlightId, categoryPath });
            contentArea.innerHTML = `<div class="flex justify-between items-center mb-3"><p class="text-gray-700 font-medium">Results for "${searchTerm}":</p><button id="clear-search-button" class="text-sm text-blue-600 hover:text-blue-800 hover:underline">Show All Categories</button></div><div id="results-container" class="space-y-2"></div>`;
            const resultsContainer = document.getElementById('results-container');
            if (filteredTopics.length > 0) {
                 filteredTopics.forEach(topic => {
                    const item = document.createElement('div'); item.className = 'search-topic-item'; item.textContent = topic.title;
                    if (topic.path) { const pathEl = document.createElement('div'); pathEl.className = 'text-xs text-gray-500 mt-1'; pathEl.textContent = topic.path.split(' > ').slice(0, -1).join(' > '); item.appendChild(pathEl); }
                    item.dataset.topicId = topic.id; item.setAttribute('role', 'button'); item.setAttribute('tabindex', '0');
                    addTapListener(item, () => renderDetailPage(topic.id));
                    item.addEventListener('keydown', (e) => { if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); renderDetailPage(topic.id); }});
                    resultsContainer.appendChild(item);
                });
            } else resultsContainer.innerHTML = '<p class="text-gray-500 text-center py-4">No topics found matching your search.</p>';
            addTapListener(document.getElementById('clear-search-button'), () => { searchInput.value = ''; renderInitialView(); });
            openCategoriesAndHighlight(categoryPath, highlightId);
        }
        function parseTextMarkup(text) {
            let safeText = text.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;");
            safeText = safeText.replace(/\n/g, "<br>");
            safeText = safeText.replace(/\[\[(.+?)\|(.+?)\]\]/g, (m, disp, info) =>
                `<span class="toggle-info">${disp}<span class="info-text hidden">${info}</span></span>`);
            safeText = safeText.replace(/\{\{red:(.+?)\}\}/g, (m, text) =>
                `<span class="text-red-600 font-semibold">${text}</span>`);
            safeText = safeText.replace(/\{\{redul:(.+?)\}\}/g, (m, text) =>
                `<span class="text-red-600 font-semibold underline decoration-red-600">${text}</span>`);
            safeText = safeText.replace(/\{\{orange:(.+?)\}\}/g, (m, text) =>
                `<span class="text-orange-600">${text}</span>`);
            safeText = safeText.replace(/\{\{blackul:(.+?)\}\}/g, (m, text) =>
                `<span class="font-bold underline decoration-black">${text}</span>`);
            safeText = safeText.replace(/\*\*(.+?)\*\*/g, '<strong>$1</strong>');
            return safeText;
        }
        function createDetailList(itemsArray) { /* ... same as v0.6 ... */
            if (!itemsArray || itemsArray.length === 0) return '<p class="text-gray-500 italic">None listed.</p>';
            return `<ul class="detail-list">${itemsArray.map(item => `<li>${parseTextMarkup(item)}</li>`).join('')}</ul>`;
        }
        function createDetailText(textBlock) { /* enhanced to support toggle-info and red text */
            if (!textBlock || textBlock.trim() === '') return '<p class="text-gray-500 italic">Not specified.</p>';
            const safeText = parseTextMarkup(textBlock);
            return `<div class="detail-text">${safeText}</div>`;
        }
        function createWarningIcon(colorClass = 'text-yellow-600') { /* ... same as v0.6 ... */
            return `<svg class="${colorClass} w-5 h-5 mr-2 flex-shrink-0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M8.485 2.495c.673-1.167 2.357-1.167 3.03 0l6.28 10.875c.673 1.167-.17 2.625-1.516 2.625H3.72c-1.347 0-2.189-1.458-1.515-2.625L8.485 2.495zM10 5a.75.75 0 01.75.75v3.5a.75.75 0 01-1.5 0v-3.5A.75.75 0 0110 5zm0 9a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd" /></svg>`;
        }

        function attachToggleInfoHandlers(container) {
            container.querySelectorAll('.toggle-info').forEach(el => {
                addTapListener(el, () => {
                    const info = el.querySelector('.info-text');
                    if (info) info.classList.toggle('hidden');
                });
            });
        }

        function attachToggleCategoryHandlers(container) {
            container.querySelectorAll(".toggle-category").forEach(header => {
                addTapListener(header, () => {
                    const arrow = header.querySelector(".arrow");
                    if (arrow) arrow.classList.toggle("rotate");
                    const content = header.nextElementSibling;
                    if (content) content.classList.toggle('hidden');
                });
            });
        }

        function openCategoriesAndHighlight(categoryPath = [], highlightId = null) {
            // Expand categories along the path
            categoryPath.forEach(catId => {
                const el = contentArea.querySelector(`[data-category-id="${catId}"]`);
                if (el && !el.classList.contains('expanded')) {
                    el.classList.add('expanded');
                    const header = el.querySelector('.category-header');
                    if (header) header.setAttribute('aria-expanded', 'true');
                }
            });
            // Clear previous highlight
            contentArea.querySelectorAll('.topic-link-item.recently-viewed').forEach(el => {
                el.classList.remove('recently-viewed');
            });
            if (highlightId) {
                const topicEl = contentArea.querySelector(`[data-topic-id="${highlightId}"]`);
                if (topicEl) topicEl.classList.add('recently-viewed');
            }
        }

        function renderDetailPage(topicId, scrollToTop = true, shouldAddHistory = true) { /* ... warning logic updated ... */
            if (navigationHistory[currentHistoryIndex] && navigationHistory[currentHistoryIndex].viewType === 'list') {
                navigationHistory[currentHistoryIndex].highlightTopicId = topicId;
                navigationHistory[currentHistoryIndex].categoryPath = allDisplayableTopicsMap[topicId].categoryPath || [];
            }
            if (shouldAddHistory) addHistoryEntry({ viewType: 'detail', contentId: topicId, categoryPath: allDisplayableTopicsMap[topicId].categoryPath || [] });
            const topic = allDisplayableTopicsMap[topicId];
            if (!topic) { /* ... error handling ... */
                contentArea.innerHTML = `<p class="text-red-600 text-center py-4">Error: Topic not found (ID: ${topicId}).</p><button id="backButtonDetailError" class="mt-4 block mx-auto px-6 py-2 bg-blue-500 text-white rounded-lg">Back to List</button>`;
                addTapListener(document.getElementById('backButtonDetailError'), () => handleSearch(true));
                return;
            }

            if (scrollToTop) { contentArea.scrollTop = 0; window.scrollTo(0, Math.max(0, contentArea.offsetTop - 80));}

            let warningsHtml = '';
            let collectedWarnings = [];

            if (topic.details) { // This is a medication
                // Pediatric Rx Warning
                if (patientData.age !== null && patientData.age < PEDIATRIC_AGE_THRESHOLD) {
                    const pedsRxText = (topic.details.pediatricRx || []).join('').toLowerCase();
                    if (!topic.details.pediatricRx || pedsRxText.length === 0 || pedsRxText.includes("don’t give") || pedsRxText.includes("not approved")) {
                        collectedWarnings.push({ type: 'orange', text: `<strong>PEDIATRIC NOTE:</strong> No specific pediatric dosage listed or not recommended for pediatric use. Patient age: ${patientData.age}. Consider alternative or consult.` });
                    }
                }
                // Contraindication checks based on patient data
                if (topic.details.contraindications && topic.details.contraindications.length > 0) {
                    topic.details.contraindications.forEach(ci => {
                        const ciLower = ci.toLowerCase();
                        // Check against patient's PMH
                        patientData.pmh.forEach(historyItem => {
                            if (ciLower.includes(historyItem)) { // Simple text match
                                collectedWarnings.push({ type: 'red', text: `<strong>CONTRAINDICATION (PMH):</strong> Medication may be contraindicated due to patient history of <strong>${historyItem}</strong> (Related to: "${ci}").` });
                            }
                        });
                        // Check against patient's current medications for interactions
                        patientData.currentMedications.forEach(currentMed => {
                            if (ciLower.includes(currentMed) && !PDE5_INHIBITORS.includes(currentMed)) { // Avoid double warning for PDE5
                                collectedWarnings.push({ type: 'red', text: `<strong>CONTRAINDICATION (Med Interaction):</strong> Patient is taking <strong>${currentMed}</strong> which may interact or be contraindicated (Related to: "${ci}").` });
                            }
                        });

                        // Specific NTG checks (already present, just integrated into new warning system)
                        if (topic.id === 'ntg') {
                            if (ciLower.includes("sbp <100")) {
                                if (patientData.vitalSigns.bp) {
                                    const bpParts = patientData.vitalSigns.bp.split('/');
                                    if (bpParts.length > 0 && parseInt(bpParts[0].trim()) < 100) {
                                        collectedWarnings.push({type: 'red', text: `<strong>CONTRAINDICATION (Low BP):</strong> Patient SBP is ${bpParts[0].trim()} mmHg (Contraindicated if SBP < 100).`});
                                    }
                                }
                            }
                            if (ciLower.includes("phosphodiesterase") || PDE5_INHIBITORS.some(pde => ciLower.includes(pde))) {
                                const usedPde5 = patientData.currentMedications.find(med => PDE5_INHIBITORS.includes(med.toLowerCase()));
                                if (usedPde5) {
                                    collectedWarnings.push({type: 'red', text: `<strong>CONTRAINDICATION (Drug Interaction):</strong> Patient is taking <strong>${usedPde5}</strong>. Recent use of PDE5 inhibitors is a contraindication for NTG.`});
                                }
                            }
                        }
                        // General allergy check
                        patientData.allergies.forEach(allergy => {
                            if (ciLower.includes(allergy) || (ciLower.includes("hypersensitivity") && topic.details.title.toLowerCase().includes(allergy))) {
                                 collectedWarnings.push({type: 'yellow', text: `<strong>ALLERGY ALERT:</strong> Patient has a listed allergy to <strong>${allergy}</strong>. This medication may be contraindicated or require caution.`});
                            }
                        });
                    });
                }
            }
             // Deduplicate warnings
            const uniqueWarnings = []; const seenTexts = new Set();
            collectedWarnings.forEach(w => { if (!seenTexts.has(w.text)) { uniqueWarnings.push(w); seenTexts.add(w.text); }});
            if (uniqueWarnings.length > 0) {
                warningsHtml = `<div class="warning-box ${uniqueWarnings.sort((a,b) => (a.type === 'red' ? -1 : b.type === 'red' ? 1 : 0))[0].type === 'red' ? 'warning-box-red' : (uniqueWarnings[0].type === 'orange' ? 'warning-box-orange' : 'warning-box-yellow')}">
                    ${uniqueWarnings.map(w => `<div>${createWarningIcon(w.type === 'red' ? 'text-red-600' : (w.type === 'orange' ? 'text-orange-600' : 'text-yellow-700'))}<span>${w.text}</span></div>`).join('<hr class="my-1 border-gray-300">')}
                </div>`;
            }

            let weightInKg = patientData.weight; if (patientData.weight && patientData.weightUnit === 'lbs') { weightInKg = patientData.weight / 2.20462; }
            let calculatedDoseInfo = "", weightDosePlaceholder = "";
            /* ... existing dose calculation logic ... */
             if (weightInKg && topic.details && topic.details.concentration) {
                if (topic.id === 'fentanyl-sublimaze' && topic.details.adultRx && topic.details.adultRx.some(rx => rx.toLowerCase().includes("1mcg/kg"))) {
                    const dosePerKg = 1; const vialConcentrationParts = topic.details.concentration.match(/(\d+)mcg\/(\d+)ml/);
                    if (vialConcentrationParts) { const drugAmountInVial = parseFloat(vialConcentrationParts[1]); const volumeInVial = parseFloat(vialConcentrationParts[2]); const concMcgPerMl = drugAmountInVial / volumeInVial; const totalDoseMcg = weightInKg * dosePerKg; const volumeToDrawMl = totalDoseMcg / concMcgPerMl; calculatedDoseInfo = `<p class="text-sm text-green-700 bg-green-50 p-2 rounded-md">Calculated for ${weightInKg.toFixed(1)} kg: <strong>Dose: ${totalDoseMcg.toFixed(1)} mcg. Volume: ${volumeToDrawMl.toFixed(2)} mL.</strong></p>`;}
                }
                if (topic.id === 'etomidate-amidate' && topic.details.adultRx && topic.details.adultRx.some(rx => rx.toLowerCase().includes("0.3mg/kg"))) {
                    const dosePerKg = 0.3; const vialConcentrationParts = topic.details.concentration.match(/(\d+)mg\/(\d+)ml/);
                    if (vialConcentrationParts) { const drugAmountInVial = parseFloat(vialConcentrationParts[1]); const volumeInVial = parseFloat(vialConcentrationParts[2]); const concMgPerMl = drugAmountInVial / volumeInVial; let totalDoseMg = weightInKg * dosePerKg; const maxDoseMatch = topic.details.adultRx.join(' ').match(/Max\s*=\s*(\d+)mg/i); const maxDose = maxDoseMatch ? parseFloat(maxDoseMatch[1]) : null; if (maxDose && totalDoseMg > maxDose) totalDoseMg = maxDose; const volumeToDrawMl = totalDoseMg / concMgPerMl; calculatedDoseInfo = `<p class="text-sm text-green-700 bg-green-50 p-2 rounded-md">Calculated for ${weightInKg.toFixed(1)} kg: <strong>Dose: ${totalDoseMg.toFixed(1)} mg. Volume: ${volumeToDrawMl.toFixed(2)} mL.</strong></p>`;}
                }
            }
            if (!calculatedDoseInfo && weightInKg) weightDosePlaceholder = `<p class="text-sm text-gray-600 italic">(Pt weight ${weightInKg.toFixed(1)} kg. Dose calcs for this drug not yet implemented.)</p>`;


            let patientInfoSummary = ''; /* ... same as v0.6 ... */
            if (patientData.age || patientData.weight || patientData.allergies.length > 0 || patientData.currentMedications.length > 0) {
                patientInfoSummary = `<div class="mb-3 p-3 bg-blue-50 border border-blue-200 rounded-md text-sm">
                    <h4 class="font-semibold text-blue-700 mb-1">Current Patient Snapshot:</h4>
                    ${patientData.age ? `<p><strong>Age:</strong> ${patientData.age} years</p>` : ''}
                    ${patientData.weight ? `<p><strong>Weight:</strong> ${patientData.weight} ${patientData.weightUnit} ${weightInKg ? `(~${weightInKg.toFixed(1)} kg)`:''}</p>` : ''}
                    ${patientData.allergies.length > 0 ? `<p><strong>Allergies:</strong> <span class="font-medium text-red-600">${patientData.allergies.join(', ')}</span></p>` : ''}
                    ${patientData.currentMedications.length > 0 ? `<p><strong>Current Meds:</strong> ${patientData.currentMedications.join(', ')}</p>` : ''}
                </div>`;
            }

            let detailContentHtml = ''; /* ... same as v0.6 ... */
            if (topic.details) {
                const d = topic.details;
                let indicationsHeading = 'Indications:';
                if (topic.id === 'atropine-sulfate') {
                    indicationsHeading += ` <span class="toggle-info" style="color:#2563eb;text-decoration-color:#2563eb">&#x25BC;<span class="info-text hidden" style="color:#15803d;text-decoration-color:#15803d">SLUDGEM pt</span></span>`;
                }
                detailContentHtml = `
                    ${d.notes ? `<div class="detail-section"><p class="text-red-600 font-semibold">${d.notes.join('<br>')}</p></div>` : ''}
                    ${d.class ? `<div class="detail-section">
                       <h3 class="detail-section-title toggle-category">Class: <span class="text-blue-600 arrow">&#x25BC;</span></h3>
                       <div class="detail-section-content hidden">
                         ${createDetailText(d.class)}
                       </div>
                     </div>` : ''}
                    ${d.indications ? `<div class="detail-section">
                          <h3 class="detail-section-title toggle-category">${indicationsHeading} <span class="text-blue-600 arrow">&#x25BC;</span></h3>
                          <div class="detail-section-content hidden">
                            ${createDetailList(d.indications)}
                          </div>
                        </div>` : ''}
                    ${d.contraindications ? `<div class="detail-section">
                                <h3 class="detail-section-title toggle-category">Contraindications: <span class="text-blue-600 arrow">&#x25BC;</span></h3>
                                <div class="detail-section-content hidden">
                                  ${createDetailList(d.contraindications)}
                                </div>
                              </div>` : ''}
                    ${d.precautions ? `<div class="detail-section">
                          <h3 class="detail-section-title toggle-category">Precautions: <span class="text-blue-600 arrow">&#x25BC;</span></h3>
                          <div class="detail-section-content hidden">
                            ${createDetailText(d.precautions)}
                          </div>
                        </div>` : ''}
                    ${d.sideEffects ? `<div class="detail-section">
                          <h3 class="detail-section-title toggle-category">Significant Adverse/Side Effects: <span class="text-blue-600 arrow">&#x25BC;</span></h3>
                          <div class="detail-section-content hidden">
                            ${createDetailList(d.sideEffects)}
                          </div>
                        </div>` : ''}
                    ${calculatedDoseInfo || weightDosePlaceholder ? `<div class="detail-section mt-3">${calculatedDoseInfo}${weightDosePlaceholder}</div>` : ''}
                    ${d.adultRx ? `<div class="detail-section adult-section">
                     <h3 class="detail-section-title toggle-category">Adult Rx: <span class="text-blue-600 arrow">&#x25BC;</span></h3>
                     <div class="detail-section-content hidden">
                       ${createDetailText(d.adultRx.join('\n\n'))}
                     </div>
                   </div>` : ''}
                    ${d.pediatricRx ? `<div class="detail-section pediatric-section">
                         <h3 class="detail-section-title toggle-category">Pediatric Rx: <span class="text-blue-600 arrow">&#x25BC;</span></h3>
                         <div class="detail-section-content hidden">
                           ${createDetailText(d.pediatricRx.join('\n\n'))}
                         </div>
                       </div>` : ''}
            } else {
                detailContentHtml = `<p class="text-lg italic">This is a placeholder for <strong>${topic.title}</strong>.</p><p class="text-sm text-gray-600">Detailed information to be added.</p>`;
            }

            contentArea.innerHTML = `
                <div class="flex flex-col sm:flex-row justify-between sm:items-center mb-4 pb-3 border-b border-gray-200">
                    <h2 class="text-xl md:text-2xl font-bold text-blue-700 mb-2 sm:mb-0 topic-main-title" data-topic-id="${topic.id}">
                        ${topic.title} ${topic.details && topic.details.concentration ? `<span class="med-concentration">${topic.details.concentration}</span>` : ''}
                    </h2>
                    <button id="backToListButton" class="w-full sm:w-auto px-5 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-300">Back to List View</button>
                </div>
                ${patientInfoSummary}
                ${warningsHtml}
                <div class="bg-gray-50 p-4 rounded-lg shadow-inner space-y-3 text-gray-800">${detailContentHtml}</div>`;
            attachToggleInfoHandlers(contentArea);
            attachToggleCategoryHandlers(contentArea);
            addTapListener(document.getElementById('backToListButton'), () => { /* ... same as v0.6 ... */
                for (let i = currentHistoryIndex -1 ; i >= 0; i--) {
                    if (navigationHistory[i] && navigationHistory[i].viewType === 'list') {
                        isNavigatingViaHistory = true; currentHistoryIndex = i;
                        searchInput.value = navigationHistory[i].contentId || '';
                        handleSearch(false, navigationHistory[i].highlightTopicId, navigationHistory[i].categoryPath || []); updateNavButtonsState(); isNavigatingViaHistory = false; return;
                    }
                }
                renderInitialView(true, null, []);
            });
        }

        // --- Event Handler ---
        function handleSearch(shouldAddHistory = true, highlightId = null, categoryPath = []) { /* ... same as v0.6 ... */
            const searchTerm = searchInput.value.trim().toLowerCase();
            if (contentArea.offsetWidth > 0) window.scrollTo(0, Math.max(0, contentArea.offsetTop - 80));
            if (!searchTerm) { renderInitialView(shouldAddHistory, highlightId, categoryPath); return; }
            const filteredTopics = allSearchableTopics.filter(topic =>
                topic.title.toLowerCase().includes(searchTerm) || (topic.path && topic.path.toLowerCase().includes(searchTerm))
            );
            renderSearchResults(filteredTopics, searchTerm, shouldAddHistory, highlightId, categoryPath);
        }





        if (document.readyState === 'loading') document.addEventListener('DOMContentLoaded', initApp);
        else initApp();
    </script>
    <script>
      if (typeof slugIDs !== 'undefined') {
        const container = document.createElement('div');
        container.id = 'slug-id-container';
        container.classList.add('hidden');
        slugIDs.forEach(id => {
          const div = document.createElement('div');
          div.id = id;
          div.dataset.branch = id;
          container.appendChild(div);
        });
        document.body.appendChild(container);
      }
    </script>
<div class="hidden">
  <span class="toggle-info">Example<span class="info-text hidden">info</span></span>
</div>
</body>
</html>
