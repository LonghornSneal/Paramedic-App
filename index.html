<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" >
    <meta name="viewport" content="width=device-width, initial-scale=1.0" >
    <title>Paramedic Quick Reference</title>
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Baloo+2:wght@600&display=swap" rel="stylesheet">
    <!-- Local Stylesheet -->
    <link rel="stylesheet" href="styles.css" >
    <!-- Tailwind CSS via CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Viewport height fix for mobile browsers -->
    <script src="viewportFix.js" defer></script>
</head>
<body class="bg-gray-100">
<!-- Sidebar Overlay -->
<div id="sidebar-overlay" class="hidden fixed inset-0 bg-black bg-opacity-50 z-40"></div>
<!-- Patient Info Sidebar -->
<div id="patient-sidebar" class="hidden">
  <!-- Close Button at top of sidebar -->
  <div class="grid justify-items-end mb-2">
    <button type="button" id="close-sidebar-button" aria-label="Close Patient Info Sidebar" title="Close Sidebar"
            class="p-2 rounded-full text-gray-500 hover:text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-400">
      <!-- Close (X) icon -->
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
           stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
      </svg>
    </button>
  </div>
  <div class="patient-sidebar-content">
    <div class="patient-line patient-line--demographics" data-line="1">
      <div class="sidebar-demographics-item sidebar-demographics-item-sex">
        <span class="sidebar-label">Sex:</span>
        <input type="hidden" id="pt-gender" value="">
        <div class="sex-picker" role="group" aria-label="Patient sex selection">
          <button type="button" class="sex-option" data-value="female" data-tooltip="Female" aria-label="Female">
            <span class="sex-icon" aria-hidden="true">
              <svg class="sex-icon-svg" viewBox="0 0 24 24" role="presentation" aria-hidden="true">
                <circle class="sex-icon-ring" cx="12" cy="8" r="5"></circle>
                <line class="sex-icon-stem" x1="12" y1="13" x2="12" y2="20"></line>
                <line class="sex-icon-cross" x1="9" y1="17" x2="15" y2="17"></line>
              </svg>
            </span>
            <span class="sr-only">Female</span>
          </button>
          <button type="button" class="sex-option" data-value="male" data-tooltip="Male" aria-label="Male">
            <span class="sex-icon" aria-hidden="true">
              <svg class="sex-icon-svg" viewBox="0 0 24 24" role="presentation" aria-hidden="true">
                <circle class="sex-icon-ring" cx="10" cy="12" r="5"></circle>
                <line class="sex-icon-stem" x1="13.5" y1="8.5" x2="19" y2="3"></line>
                <line class="sex-icon-arrow" x1="17" y1="3" x2="19" y2="3"></line>
                <line class="sex-icon-arrow" x1="19" y1="3" x2="19" y2="5"></line>
              </svg>
            </span>
            <span class="sr-only">Male</span>
          </button>
        </div>
      </div>
      <!--
      Explanation:
      - Adding the `sidebar-demographics-item-age--inline` class switches the wrapper to `display:grid; grid-auto-flow:column; column-gap:0.5rem; align-items:flex-start;` in `styles/sidebar/patient-sidebar-controls.css`, which keeps the entire Age category aligned with the Sex controls.
      - Wrapping the toggle group and numeric input inside `.age-inline-wrap { display:inline-grid; grid-auto-flow:column; align-items:center; column-gap:0.35rem; }` ensures the stacked Days/Months/Years buttons sit immediately beside the age number field without breaking the line.
      - The `age-unit-toggle-group--stacked` modifier keeps the toggle buttons vertical by targeting `.age-unit-toggle-group--stacked { display:grid; grid-auto-flow:row; }`, so the buttons remain stacked even when the surrounding wrapper shifts to a horizontal grid.
      Override notes:
      - If you already changed `.age-unit-toggle-group` in `styles/sidebar/patient-sidebar-controls.css`, mirror the modifier inside the `@media (min-width: 768px)` block in `styles/sidebar/patient-sidebar-forms.css` so the desktop spacing keeps the stacked toggle layout.
      - When the Age block still wraps underneath Sex after these changes, confirm `styles/sidebar/patient-sidebar-forms.css` leaves `.patient-line--demographics` using a column-flow grid; add `.patient-line--demographics { grid-auto-flow: column; }` if the helper was removed.
      -->
      <div class="sidebar-demographics-item sidebar-demographics-item-age sidebar-demographics-item-age--inline">
        <label for="pt-age" class="sidebar-label">Age:</label>
        <div class="age-unit-toggle-group age-unit-toggle-group--stacked" role="group" aria-label="Select age units">
          <button type="button" class="age-unit-toggle" data-unit="days" data-tooltip="Days" aria-label="Days" aria-pressed="false">Days</button>
          <button type="button" class="age-unit-toggle" data-unit="months" data-tooltip="Months" aria-label="Months" aria-pressed="false">Months</button>
          <button type="button" class="age-unit-toggle" data-unit="years" data-tooltip="Years" aria-label="Years" aria-pressed="true">Years</button>
        </div>
        <div class="unit-input age-unit-input" data-unit="years">
          <input type="number" id="pt-age" class="sidebar-input age-input age-input--compact" inputmode="decimal" step="any">
          <span class="unit-suffix age-unit-suffix" aria-hidden="true"></span>
        </div>
      </div>
    </div>
    <div class="patient-line patient-line--demographic" data-line="2">
    <!--  - The new `weight-unit-stack` element slots directly between the label and numeric input; give it `display:inline-grid; grid-auto-flow:row; row-gap:0.15rem; font-size:0.7rem; text-transform:lowercase;` in `styles/sidebar/patient-sidebar-controls.css` so "kg" appears above "lbs" without pushing the input out of alignment.
      - Adding the `sidebar-demographics-item-weight--stacked` modifier lets you constrain the row width via `.sidebar-demographics-item-weight--stacked { display:grid; grid-auto-flow:column; align-items:center; column-gap:0.45rem; }`, keeping the stack, input, and toggles on one line between the Weight label and field.
      - Applying the `weight-unit-toggle-group--vertical` class ensures the toggle buttons inherit a column layout via `.weight-unit-toggle-group--vertical { display:grid; grid-auto-flow:row; }` even if the base `.weight-unit-toggle-group` gets overridden elsewhere.
      Override notes:
      - If the stacked letters disappear, confirm `styles/sidebar/patient-sidebar-forms.css` does not clip inline children (remove `overflow:hidden` if present on `.sidebar-demographics-item-weight`).
      - When the toggle buttons refuse to stack, check for media query overrides in `styles/sidebar/patient-sidebar-forms.css` (the `@media (min-width: 768px)` block can reassign `grid-auto-flow:column`; offset with `.weight-unit-toggle-group--vertical` selector in that media query).

      <div class="weight-unit-stack">kg<br>lbs</div>
.weight-unit-stack { display: inline-grid; grid-auto-flow: row; justify-content: center;
    font-size: 0.7rem; margin-right: 0.25rem; text-transform: lowercase; }
 NOTE: `.weight-unit-stack` is currently unused because index.html does not render the helper span yet.
   - To activate it, insert the `<div class="weight-unit-stack"><span>kg</span><span>lbs</span></div>` snippet from the inline comment in index.html between the Weight label and the numeric input.
   - The style keeps "kg" stacked above "lbs" in the small column you requested; once the markup is present, this CSS will take effect immediately.
-->
      <div class="sidebar-demographics-item sidebar-demographics-item-weight sidebar-demographics-item-weight--stacked">
        <label for="pt-weight-value" class="sidebar-label">Weight:</label>
        <div class="weight-unit-stack" aria-hidden="true">
          <span>kg</span>
          <span>lbs</span>
        </div>
        <div class="unit-input weight-unit-input" data-unit="kg">
          <input type="number" id="pt-weight-value" class="sidebar-input weight-input" placeholder="kg" inputmode="decimal" step="any">
          <span class="unit-suffix weight-unit-suffix" aria-hidden="true"></span>
        </div>
        <div class="weight-unit-toggle-group weight-unit-toggle-group--vertical" role="group" aria-label="Select weight units">
          <button type="button" class="weight-unit-toggle" data-unit="kg" aria-label="Kilograms" aria-pressed="false">kg</button>
          <button type="button" class="weight-unit-toggle" data-unit="lb" aria-label="Pounds" aria-pressed="false">lbs</button>
        </div>
        <div id="weight-summary" class="weight-summary hidden" aria-live="polite"></div>
      </div>
      <div class="sidebar-demographics-item sidebar-demographics-item-height">
        <label for="pt-height-ft" class="sidebar-label">Height:</label>
        <div class="height-inline-inputs">
          <input type="number" id="pt-height-ft" class="sidebar-input height-input height-input--compact" inputmode="numeric" aria-label="Feet" step="any">
          <span class="height-unit-text">ft</span>
          <input type="number" id="pt-height-in" class="sidebar-input height-input height-input--compact" inputmode="numeric" aria-label="Inches" step="any">
          <span class="height-unit-text">in</span>
        </div>
      </div>
    </div>
    <div class="patient-line patient-line--full" data-line="3">
      <div class="sidebar-field sidebar-field-textarea sidebar-field-textarea--chips-right">
        <div class="sidebar-field-row">
          <label for="pt-pmh" class="sidebar-label">PMH:</label>
          <div id="pt-pmh-chips" class="sidebar-chip-list is-empty" aria-live="polite"></div>
        </div>
        <div class="sidebar-field-row sidebar-field-row--input">
          <div class="autocomplete-container sidebar-input-flex">
            <textarea id="pt-pmh" rows="1" class="sidebar-input"></textarea>
            <div id="pt-pmh-suggestions" class="autocomplete-suggestions hidden"></div>
          </div>
          <div class="sidebar-chip-ghost" aria-hidden="true"></div>
        </div>
      </div>
    </div>
    <!-- Explanation:
    - Introduce `.sidebar-field-textarea--chips-right { display:grid; grid-template-columns:minmax(0, 1fr) auto; gap:0.5rem; align-items:start; }` in `styles/sidebar/patient-sidebar-forms.css` so the label/input column and chip column sit side-by-side without relocating the textarea.
    - `.sidebar-field-row` should use a grid helper (`display:grid; grid-template-columns:minmax(0, 1fr) auto; column-gap:0.5rem;`) to keep the label on the left while chips render in a consistent column on the right; reuse the same structure for Allergies, Current Rx's, Indications, and S/S by applying the modifier class to those wrappers too.
    - The optional `.sidebar-chip-ghost` placeholder preserves the chip column width when no chips exist; style it with `visibility:hidden; min-width:12ch;` to prevent the textarea column from stretching when the chip list is empty.
    Override notes:
    - If the chips still fall underneath the textarea, verify `styles/sidebar/patient-sidebar-forms.css` does not force `.sidebar-chip-list { width:100%; }`; remove or override that declaration inside the modifier scope so the grid column can size to content.
    - When the Autocomplete dropdown suddenly shrinks, adjust `.sidebar-field-textarea--chips-right .autocomplete-container { width:100%; }` because the new grid makes width auto by default.
    -->
    <div class="patient-line patient-line--full" data-line="4">
      <div class="sidebar-field sidebar-field-textarea sidebar-field-textarea--chips-right">
        <div class="sidebar-field-row">
          <label for="pt-allergies" class="sidebar-label">Allergies:</label>
          <div id="pt-allergies-chips" class="sidebar-chip-list is-empty" aria-live="polite"></div>
        </div>
        <div class="sidebar-field-row sidebar-field-row--input">
          <div class="autocomplete-container sidebar-input-flex">
            <textarea id="pt-allergies" rows="1" class="sidebar-input"></textarea>
            <div id="pt-allergies-suggestions" class="autocomplete-suggestions hidden"></div>
          </div>
          <div class="sidebar-chip-ghost" aria-hidden="true"></div>
        </div>
      </div>
    </div>
       <!-- 
    - Copy the PMH layout change to each textarea section so Allergies (and the remaining drop-downs) hold their chip column to the right of the input.
    - The `sidebar-chip-ghost` placeholder locks in the column width until a chip is added, eliminating layout jump when the first allergy is selected.
    Override notes:
    - If this block still collapses downward, confirm `styles/sidebar/patient-sidebar-forms.css` includes the `.sidebar-field-textarea--chips-right` grid rules and that no Tailwind utility is resetting the layout.
    - Should the dropdown overlay clip against the right column, adjust the width using the `.autocomplete-suggestions` comment in `styles/sidebar/patient-autocomplete.css`.
    -->
    <div class="patient-line patient-line--full" data-line="5">
      <div class="sidebar-field sidebar-field-textarea">
        <div class="sidebar-field-heading">
          <label for="pt-medications" class="sidebar-label">Current Rx's:</label>
          <div id="pt-medications-chips" class="sidebar-chip-list is-empty" aria-live="polite"></div>
        </div>
        <div class="autocomplete-container sidebar-input-flex">
          <textarea id="pt-medications" rows="1" class="sidebar-input"></textarea>
          <div id="pt-medications-suggestions" class="autocomplete-suggestions hidden"></div>
        </div>
      </div>
    </div>
    <div class="patient-line patient-line--full" data-line="6">
      <div class="sidebar-field sidebar-field-textarea">
        <div class="sidebar-field-heading">
          <label for="pt-indications" class="sidebar-label">Indications:</label>
          <div id="pt-indications-chips" class="sidebar-chip-list is-empty" aria-live="polite"></div>
        </div>
        <div class="autocomplete-container sidebar-input-flex">
          <textarea id="pt-indications" rows="1" class="sidebar-input"></textarea>
          <div id="pt-indications-suggestions" class="autocomplete-suggestions hidden"></div>
        </div>
      </div>
    </div>
    <div class="patient-line patient-line--full" data-line="7">
      <div class="sidebar-field sidebar-field-textarea">
        <div class="sidebar-field-heading">
          <label for="pt-symptoms" class="sidebar-label">S/S:</label>
          <div id="pt-symptoms-chips" class="sidebar-chip-list is-empty" aria-live="polite"></div>
        </div>
        <div class="autocomplete-container sidebar-input-flex">
          <textarea id="pt-symptoms" rows="2" class="sidebar-input"></textarea>
          <div id="pt-symptoms-suggestions" class="autocomplete-suggestions hidden"></div>
        </div>
      </div>
    </div>
    <!--
    NEW CODE:
    <div class="patient-line patient-line--vital patient-line--vitals-primary" data-line="8">
      <div class="vital-item vital-item-bp vital-item--compact">
        <span class="vital-label">BP:</span>
        <div class="bp-stack bp-stack--narrow" role="group" aria-label="Blood pressure entry">
          <input type="text" id="vs-bp-systolic" class="bp-input bp-input--systolic bp-input--compact" inputmode="numeric" maxlength="3" aria-label="Systolic blood pressure">
          <span class="bp-divider-line" aria-hidden="true"></span>
          <input type="text" id="vs-bp-diastolic" class="bp-input bp-input--diastolic bp-input--compact" inputmode="numeric" maxlength="3" aria-label="Diastolic blood pressure">
        </div>
        <select id="vs-bp-select" class="vital-mini-select vital-mini-select--bp" aria-label="Blood pressure preset">
          <option value=""></option>
          <option value="200+">200+</option>
          <option value="160+">160+</option>
          <option value="Normal (90-160 SBP)">Normal (90-160 SBP)</option>
          <option value="70-90">70-90</option>
          <option value="70-">70-</option>
        </select>
      </div>
      <div class="vital-item vital-item-hr vital-item--compact" data-line-order="8.2">
        <span class="vital-label">HR:</span>
        <div class="unit-input" data-unit="HR">
          <input type="text" id="vs-hr-value" class="sidebar-input vital-input vital-input--tight" inputmode="numeric" maxlength="3" aria-label="Heart rate numeric entry">
          <span class="unit-suffix" aria-hidden="true">HR</span>
        </div>
        <select id="vs-hr-select" class="vital-mini-select" aria-label="Heart rate preset">
          <option value=""></option>
          <option value="150+">150+</option>
          <option value="100+">100+</option>
          <option value="60-100">60-100</option>
          <option value="&gt;60">&gt;60</option>
          <option value="&gt;40">&gt;40</option>
        </select>
      </div>
      <div class="vital-item vital-item-spo2 vital-item--compact" data-line-order="8.3">
        <span class="vital-label">% SpO<sub>2</sub>:</span>
        <div class="unit-input" data-unit="%">
          <input type="text" id="vs-spo2-value" class="sidebar-input vital-input vital-input--tight" inputmode="numeric" maxlength="3" aria-label="Pulse oximetry numeric entry">
          <span class="unit-suffix" aria-hidden="true">%</span>
        </div>
        <select id="vs-spo2-source" class="vital-mini-select" aria-label="Oxygen delivery source">
          <option value=""></option>
          <option value="RA">RA</option>
          <option value="NC">NC</option>
          <option value="Vent">Vent</option>
          <option value="CPAP">CPAP</option>
          <option value="BiPaP">BiPaP</option>
        </select>
      </div>
    </div>

    Explanation:
    - Applying `patient-line--vitals patient-line--vital-primary { display:grid; grid-auto-flow:column; column-gap:0.5rem; align-items:flex-start; }` in `styles/sidebar/patient-sidebar-forms.css` keeps BP, HR, and %SpO₂ locked on the same numbered line while still allowing you to toggle `grid-auto-flow` for narrower screens when needed.
    - The `vital-item--compact` modifier gives you room to shrink each group with CSS like `.vital-item--compact { justify-content:start; }`, so the three vitals sit shoulder-to-shoulder without spiking the row height.
    - Use `.bp-stack--narrow { max-width: 5.5rem; }` and `.bp-input--compact { width: 2.5rem; padding: 0.2rem 0.25rem; font-size: 0.85rem; }` to make both blood pressure inputs smaller while keeping the divider line in the middle.
    - Tag the HR and SpO₂ inputs with `.vital-input--tight { width: 3rem; font-size: 0.85rem; }` so they visually match the new BP width and line up evenly.
    Override notes:
    - If you change `data-line` numbers but nothing moves, check `styles/sidebar/patient-sidebar-forms.css` for rules that set explicit `order` on `.vital-item-*`; update those selectors to reference your `data-line-order` attributes or remove the hard-coded order.
    - When the BP stack refuses to shrink, confirm there is no lingering `justify-self:stretch` override on `.bp-stack` or `.bp-input`—line 270 in `styles/sidebar/patient-sidebar-forms.css` grants them extra width; override it with the `--narrow` modifier.
    -->
    <div class="patient-line patient-line--vital" data-line="8">
      <div class="vital-item vital-item-bp">
        <span class="vital-label">BP:</span>
        <div class="bp-stack" role="group" aria-label="Blood pressure entry">
          <input type="text" id="vs-bp-systolic" class="bp-input bp-input--systolic" inputmode="numeric" maxlength="3" aria-label="Systolic blood pressure">
          <span class="bp-divider-line" aria-hidden="true"></span>
          <input type="text" id="vs-bp-diastolic" class="bp-input bp-input--diastolic" inputmode="numeric" maxlength="3" aria-label="Diastolic blood pressure">
        </div>
        <select id="vs-bp-select" class="vital-mini-select" aria-label="Blood pressure preset">
          <option value=""></option>
          <option value="200+">200+</option>
          <option value="160+">160+</option>
          <option value="Normal (90-160 SBP)">Normal (90-160 SBP)</option>
          <option value="70-90">70-90</option>
          <option value="70-">70-</option>
        </select>
      </div>
      <div class="vital-item vital-item-hr">
        <span class="vital-label">HR:</span>
        <div class="unit-input" data-unit="HR">
          <input type="text" id="vs-hr-value" class="sidebar-input vital-input" inputmode="numeric" maxlength="3" aria-label="Heart rate numeric entry">
          <span class="unit-suffix" aria-hidden="true">HR</span>
        </div>
        <select id="vs-hr-select" class="vital-mini-select" aria-label="Heart rate preset">
          <option value=""></option>
          <option value="150+">150+</option>
          <option value="100+">100+</option>
          <option value="60-100">60-100</option>
          <option value="&gt;60">&gt;60</option>
          <option value="&gt;40">&gt;40</option>
        </select>
      </div>
      <div class="vital-item vital-item-spo2">
        <span class="vital-label">% SpO<sub>2</sub>:</span>
        <div class="unit-input" data-unit="%">
          <input type="text" id="vs-spo2-value" class="sidebar-input vital-input" inputmode="numeric" maxlength="3" aria-label="Pulse oximetry numeric entry">
          <span class="unit-suffix" aria-hidden="true">%</span>
        </div>
        <select id="vs-spo2-source" class="vital-mini-select" aria-label="Oxygen delivery source">
          <option value=""></option>
          <option value="RA">RA</option>
          <option value="NC">NC</option>
          <option value="Vent">Vent</option>
          <option value="CPAP">CPAP</option>
          <option value="BiPaP">BiPaP</option>
        </select>
      </div>
    </div>
    <div class="patient-line patient-line--vital" data-line="9">
      <div class="vital-item">
        <span class="vital-label">EtCO<sub>2</sub>:</span>
        <div class="unit-input" data-unit="EtCO2">
          <input type="text" id="vs-etco2" class="sidebar-input vital-input" inputmode="numeric" maxlength="2" aria-label="End tidal CO2">
          <span class="unit-suffix" aria-hidden="true">EtCO<sub>2</sub></span>
        </div>
      </div>
      <div class="vital-item">
        <span class="vital-label">RR:</span>
        <div class="unit-input" data-unit="RR">
          <input type="text" id="vs-rr" class="sidebar-input vital-input" inputmode="numeric" maxlength="2" aria-label="Respiratory rate">
          <span class="unit-suffix" aria-hidden="true">RR</span>
        </div>
      </div>
      <div class="vital-item">
        <span class="vital-label">BGL:</span>
        <div class="unit-input" data-unit="mg/dL">
          <input type="text" id="vs-bgl-value" class="sidebar-input vital-input" inputmode="numeric" maxlength="3" aria-label="Blood glucose numeric entry">
          <span class="unit-suffix" aria-hidden="true">mg/dL</span>
        </div>
        <select id="vs-bgl-select" class="vital-mini-select" aria-label="Blood glucose preset">
          <option value=""></option>
          <option value="Normal">Normal</option>
          <option value="High">High</option>
          <option value="Low">Low</option>
          <option value="Critical">Critical</option>
        </select>
      </div>
    </div>
    <div class="patient-line patient-line--vital" data-line="10">
      <div class="vital-item vital-item-pupils">
        <span class="vital-label">Pupils:</span>
        <div class="unit-input" data-unit="mm">
          <input type="text" id="vs-pupils-value" class="sidebar-input vital-input" inputmode="decimal" maxlength="4" aria-label="Pupil size in millimeters">
          <span class="unit-suffix" aria-hidden="true">mm</span>
        </div>
        <select id="vs-pupils-select" class="vital-mini-select" aria-label="Pupil descriptor">
          <option value=""></option>
          <option value="PERRL">PERRL</option>
          <option value="Pinpoint">Pinpoint</option>
          <option value="Dilated">Dilated</option>
          <option value="Unequal">Unequal</option>
          <option value="Fixed">Fixed</option>
          <option value="Sluggish">Sluggish</option>
          <option value="Non-reactive">Non-reactive</option>
        </select>
      </div>
      <div class="vital-item vital-item-lungs">
        <span class="vital-label">Lung Sounds:</span>
        <select id="vs-lung-sounds" class="sidebar-input vital-select vital-mini-select" aria-label="Lung sounds">
          <option value=""></option>
          <option value="Clear">Clear</option>
          <option value="Clear Bilaterally">Clear Bilaterally</option>
          <option value="Diminished">Diminished</option>
          <option value="Coarse">Coarse</option>
          <option value="Crackles">Crackles</option>
          <option value="Rales">Rales</option>
          <option value="Rhonchi">Rhonchi</option>
          <option value="Wheezes">Wheezes</option>
          <option value="Stridor">Stridor</option>
          <option value="Absent">Absent</option>
        </select>
      </div>
    </div>
    <div class="patient-line patient-line--vital" data-line="11">
      <div class="vital-item vital-item-gcs">
        <span class="vital-label">GCS:</span>
        <div class="unit-input" data-unit="GCS">
          <input type="text" id="vs-gcs-value" class="sidebar-input vital-input" inputmode="numeric" maxlength="2" aria-label="Glasgow Coma Scale numeric entry">
          <span class="unit-suffix" aria-hidden="true">GCS</span>
        </div>
        <select id="vs-gcs-select" class="vital-mini-select" aria-label="Glasgow Coma Scale preset">
          <option value=""></option>
          <option value="15">15</option>
          <option value="14">14</option>
          <option value="13">13</option>
          <option value="12">12</option>
          <option value="11">11</option>
          <option value="10">10</option>
          <option value="9">9</option>
          <option value="8">8</option>
          <option value="7">7</option>
          <option value="6">6</option>
          <option value="5">5</option>
          <option value="4">4</option>
          <option value="3">3</option>
        </select>
      </div>
      <div class="vital-item vital-item-ao">
        <span class="vital-label">A&amp;O:</span>
        <select id="vs-ao-status" class="sidebar-input vital-select vital-mini-select" aria-label="Alert and oriented status">
          <option value=""></option>
          <option value="0">0</option>
          <option value="1">1</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
        </select>
      </div>
    </div>
    <div class="patient-line patient-line--rhythm" data-line="12">
      <div class="ekg-row-main">
        <div class="ekg-row-heading">
          <label for="pt-ekg-select" class="sidebar-label">Rhythm:</label>
          <button type="button" id="ekg-help-button" class="sidebar-help-button" aria-haspopup="dialog" aria-controls="ekg-help-modal">Help</button>
        </div>
        <div class="ekg-row-controls">
          <select id="pt-ekg-select" class="sidebar-input vital-select" aria-label="EKG rhythm preset">
            <option value=""></option>
          </select>
          <div class="autocomplete-container ekg-autocomplete">
            <input type="text" id="pt-ekg" class="sidebar-input vital-input" placeholder="Type or select rhythm">
            <div id="pt-ekg-suggestions" class="autocomplete-suggestions hidden"></div>
          </div>
        </div>
      </div>
      <div class="ekg-preview-shell" aria-hidden="true">
        <img id="ekg-rhythm-preview" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==" alt="" class="ekg-preview-img">
      </div>
      <button type="button" id="ekg-rhythm-info" class="ekg-info-button" aria-label="View rhythm definition" disabled>i</button>
    </div>
    <div class="patient-line patient-line--modifier" data-line="13">
      <div class="ekg-row-main">
        <label for="pt-ekg-secondary" class="sidebar-label">Modifier:</label>
        <div class="ekg-row-controls">
          <select id="pt-ekg-secondary" class="sidebar-input vital-select" aria-label="EKG modifier preset">
            <option value=""></option>
          </select>
        </div>
      </div>
      <div class="ekg-preview-shell" aria-hidden="true">
        <img id="ekg-modifier-preview" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==" alt="" class="ekg-preview-img">
      </div>
      <button type="button" id="ekg-modifier-info" class="ekg-info-button" aria-label="View modifier definition" disabled>i</button>
      <div id="ekg-summary-text" class="ekg-summary-text is-empty" aria-live="polite"></div>
    </div>
  </div>
</div>
<div id="settings-panel" class="hidden fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-white p-4 rounded-lg shadow-lg">
    <div class="flex justify-end mb-2">
        <button type="button" id="close-settings-button" aria-label="Close Settings" title="Close Settings" class="p-2 rounded-full text-gray-500 hover:text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-400">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
            </svg>
        </button>
    </div>
    <h2 class="text-xl font-semibold text-center mb-4">Settings</h2>
    <div class="flex items-center justify-between">
        <label for="dark-mode-toggle" class="mr-2 text-gray-800">Dark Mode</label>
        <input type="checkbox" id="dark-mode-toggle" class="w-5 h-5" >
    </div>
</div>

<div id="app-container" class="flex flex-col min-h-screen">

    <!-- Application Header -->
        <header class="bg-blue-600 text-white py-0 sticky top-0 z-40 shadow-md">
        <div class="container mx-auto flex items-start">
            <div class="flex-shrink-0">
                <button type="button" id="open-sidebar-button" class="header-nav-button" aria-label="Open Patient Info Sidebar" title="Patient Info">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" /></svg>
                </button>
            </div>
            <div class="flex-grow text-center">
                <h1 class="text-lg sm:text-xl md:text-2xl font-semibold">Paramedic Quick Reference</h1>
                <div class="mt-2">
                    <input type="search" id="searchInput" placeholder="Search topics or medications..." class="w-full p-sm-3 rounded-lg border-2 border-blue-400 text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-300 focus:border-blue-300" aria-label="Search Treatment Information" >
                </div>
                <!-- Compact Patient Snapshot Bar below search -->
                <div id="patient-snapshot-bar" class="mt-2 text-sm text-yellow-400"></div>
            </div>
            <div class="flex-sm-shrink-4 flex-start items-end">
                <div class="flex space-x-1">
                    <button type="button" id="nav-back-button" class="header-nav-button" aria-label="Navigate Back" title="Back" disabled>
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5L8.25 12l7.5-7.5" /></svg>
                    </button>
                    <button type="button" id="nav-forward-button" class="header-nav-button" aria-label="Navigate Forward" title="Forward" disabled>
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5" /></svg>
                    </button>
                </div>
                <button type="button" id="nav-home-button" class="header-nav-button mt-sm-2" aria-label="Home" title="Home">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
                    </svg>
                </button>
                <button type="button" id="history-button" class="header-nav-button mt-2" aria-label="History" title="History">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                </button>
                <!-- History Dropdown Panel (hidden by default) -->
            <div id="history-panel" class="hidden fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-white p-4 rounded-lg shadow-lg max-h-96 overflow-y-auto z-50">
                <div class="flex justify-end mb-2">
                    <button type="button" id="close-history-button" aria-label="Close History" title="Close History" class="p-2 rounded-full text-gray-500 hover:text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-400">
                        <!-- Close (X) icon (same SVG markup as used in other close buttons) -->
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                        </svg>
                    </button>
                </div>
                <h2 class="text-xl font-semibold text-center mb-4">History</h2>
                <div id="history-list" class="space-y-1"></div>
            </div>
            </div>
        </div>
    </header>

    <!-- Main Content Area -->
    <main class="w-full p-1">
    <div id="content-area" class="bg-white p-3 md:p-6 rounded-lg shadow-lg min-h-[calc(var(--vh,1vh)*100-220px)]">
        <p class="text-gray-500 text-center">Loading categories...</p>
    </div>
    </main>
    <!-- Application Footer -->
    <footer class="text-center p-4 text-gray-500 text-sm">
  App Version 0.7
      <button type="button" id="settings-button" class="ml-4">Settings</button>
    </footer>
</div>
<script type="module" src="main.js"></script>

<div id="ekg-help-backdrop" class="modal-backdrop hidden"></div>
<div id="ekg-help-modal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="ekg-help-title">
  <div class="modal-content">
    <button type="button" id="ekg-help-close" class="modal-close" aria-label="Close EKG help">&times;</button>
    <h3 id="ekg-help-title">EKG Interpretation</h3>
    <div id="ekg-modal-general">
      <p class="modal-intro">
        Use these quick cues when selecting a rhythm or modifier. The info buttons beside each selector open detailed previews with definitions.
      </p>
      <ul class="modal-list">
        <li><strong>Sinus Tachycardia:</strong> Regular rhythm, rate &gt; 100 bpm, upright P before each QRS.</li>
        <li><strong>Sinus Bradycardia:</strong> Regular rhythm, rate &lt; 60 bpm, upright P before each QRS.</li>
        <li><strong>Atrial Fibrillation:</strong> Irregularly irregular rhythm with absent P waves and fibrillatory baseline.</li>
        <li><strong>SVT:</strong> Narrow-complex tachycardia &gt; 150 bpm, P waves often hidden.</li>
        <li><strong>Ventricular Tachycardia:</strong> Wide-complex rhythm &gt; 100 bpm, monomorphic or polymorphic morphology.</li>
      </ul>
    </div>
    <div id="ekg-modal-detail" class="ekg-modal-detail hidden">
      <h4 id="ekg-modal-detail-title">EKG Detail</h4>
      <img id="ekg-modal-detail-image" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==" alt="" class="ekg-modal-detail-image">
      <p id="ekg-modal-detail-definition" class="ekg-modal-detail-definition"></p>
      <button type="button" id="ekg-modal-back" class="modal-back-button">Back</button>
    </div>
  </div>
</div>
</body>
</html>
