/* Sidebar sections (applies to every grouping inside the Patient Info Sidebar: Demographics, PMH, Allergies, etc.) */
.sidebar-section { /* Wraps each patient sidebar section (e.g., PMH block, Allergies block) so we can control separators between blocks */
  margin: 0; /* "0" Removes default section margin so rows sit flush against each other */
  padding: 0; /* "0" Strips padding so content aligns edge-to-edge with labels */
  border-top: none; /* "none" Drop the top border to avoid double borders between stacked sections */
  border-bottom: 0.5px solid #e5e7eb; } /* Light divider under each section */

.sidebar-section:last-child { /* Special case for final section so it does not draw a bottom border */
  border-bottom: none; } /* "none" Removes trailing divider to avoid a hanging line at the bottom */

.sidebar-section-title { /* unused due to no section titles in use */
  font-size: 1.125rem; font-weight: 600;
  color: #f07706;
  margin: 0;
  padding: 0; }

  /* Base styling for all single-line inputs within the Patient Info Sidebar (e.g., Sex selector hidden input, Age numeric field, Vital sign fields).
    To display PMH/Allergies/Current Rx's/Indications/S/S entries to the right without moving this box, populate patientData
    arrays (pmhDisplay, allergyDisplay, etc.) so the .sidebar-chip-list renders the orange chips adjacent to the input.
    Increase the font size of all sidebar inputs by uncommenting the snippet below: */
  
/*
- (override snippet) text in any pt sidebar input (PMH textarea, vitals, demographics) appears larger; 
- targets both single-line & textarea variants so font sizing stays consistent.
- Increasing `letter-spacing`("letter-spacing: 0.01em") a touch keeps condensed vitals legible even after you tighten the input widths for BP & HR.
- If the new font size does not apply, confirm Tailwind utility classes (e.g., `text-sm`) are not being injected on the inputs elsewhere—classList additions in JavaScript can override CSS specificity; 
- add `!important` as a last resort on the `.sidebar-input` rule. */

.sidebar-input, textarea.sidebar-input { font-size: 10rem;  /* mPMH, vitals, etc. */
  justify-self: start; /* Prevent inputs from stretching and keep width content-based */
  width: auto; /* "auto" Allows width to be dictated by min/max width constraints */
  min-width: 1.5ch; max-width: 10ch; min-height: 0.5rem; padding: 0.003rem 0.0045rem; /* text entry */
  border: 1px solid #2311e9; border-radius: 0.7rem;
  font-size: 0.485rem; line-height: 0.5;
  color: #d406b9; background-color: #fff; transition: border-color 0.2s ease, box-shadow 0.2s ease; } /* focus/hover effects */

.sidebar-input::placeholder { /* Placeholder styling for empty fields (e.g., PMH textarea hint text) */
  color: #9ca3af; }
.sidebar-input:focus { /* Focus state for keyboard/mouse users when they click into a sidebar field (Sex, Age, vitals, etc.) */
  border-color: #2563eb;
  box-shadow: 0 0 0 2px rgb(37 99 235 / 20%); /* Add subtle glow */
  outline: none; } /* Remove default outline so only custom glow is shown */

textarea.sidebar-input { 
  /* Overrides for multi-line fields such as the PMH, Allergies, Current Rx's, Indications, & S/S textareas.
    The textarea stays fixed in place while the .sidebar-chip-list element (adjacent to this field) displays the chosen items.
    If you need a taller typing area without shifting chips, adjust min-height here */
  min-height: 0.5rem; /* Allow slightly taller area for multi-line text */
  max-width: 10ch; /* Avoid overly wide text areas that could break layout */
  padding-top: 0.2rem; /* Balance vertical padding now that field is deeper */
  padding-bottom: 0.2rem; /* Mirror top padding for symmetry */
  line-height: 1.0; }

select.sidebar-input { 
  /* Styles dropdown selects within the sidebar (e.g., Pupils, GCS, Lung Sounds dropdown arrows) to appear as compact square buttons.
    For autocomplete dropdowns that need to be wider (PMH suggestions), adjust .autocomplete-suggestions width in patient-sidebar-autocomplete.css
    so the suggestion panel exceeds the input while the input width here remains compact.
    Example override (commented) you can place in patient-sidebar-autocomplete.css: */
  /* .autocomplete-suggestions { width: clamp(20ch, 28vw, 32ch); max-height: 14rem; } */

  width: 0.9rem; /* dropdown arrow */
  min-width: 0.1rem; /* Prevent options from shrinking smaller than the icon */
  max-width: 1.1rem; /* Keep options from stretching wider than intended */
  padding: 0; /* centers chevron */
  text-indent: -9999px; /* Hide options, leaves only icon visible */
  appearance: none; /* Remove native browser styling for consistent look */
  background-image: url("data:image/svg+xml,%3Csvg width='16' height='16' fill='none' stroke='%236b7280' stroke-width='2' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M4 6l4 4 4-4'/%3E%3C/svg%3E"); /* Inline chevron icon */
  background-repeat: no-repeat; /* Prevent icon tiling */
  background-position: center; /* Center icon within the square */
  background-color: #ed1818;
  border-radius: 0.6rem; /* rounded corners */
}

select.sidebar-input:focus-visible { /* Focus styling for keyboard tab navigation (e.g., Pupils select) */
  outline: 1px solid #2535eb; /* outline for focus state */
  outline-offset: 0px; } /* Offset outline */

@supports (resize: vertical) { /* Feature query for browsers that support textarea resize control */
  textarea.sidebar-input { /* Apply only when vertical resize is supported so PMH/Allergies/Current Rx's/Indications/Symptoms textareas can be resized vertically */
    resize: vertical; } /* Allow user to expand textarea vertically without affecting width */
}

.patient-line { 
  /* Wrapper for each row inside the sidebar (e.g., line 1 through line 13).
    To move categories onto specific numbered lines (e.g., keeping BP/HR/% SpO₂ together), adjust the data-line attribute
    in index.html and update the order rules at the bottom of this file to match the desired row placement.
    Example swap (commented) of rows 8 and 9: /*
                      <!-- index.html -->
                      <div class="patient-line patient-line--vitals" data-line="8">
                      <div class="patient-line patient-line--vitals" data-line="9">

                      -- CSS (within this file) --
                      .patient-line[data-line="8"] { order: 9; }
                      .patient-line[data-line="9"] { order: 8; }
                    */
  /*
  NEW CODE:
  <!-- index.html -->
  <div class="patient-line patient-line--vitals patient-line--vitals-primary" data-line="8">...</div>
  <div class="patient-line patient-line--vitals" data-line="9">...</div>

   styles/sidebar/patient-sidebar-forms.css
  .patient-line[data-line="8"] { order: 8; }
  .patient-line[data-line="9"] { order: 9; }
  .patient-line[data-line="8"] .vital-item--compact { justify-self: start; }
  
  old code:
  <!-- index.html -->
  <div class="patient-line patient-line--vitals" data-line="8">...</div>
  <div class="patient-line patient-line--vitals" data-line="9">...</div>

   styles/sidebar/patient-sidebar-forms.css
  .patient-line[data-line="8"] { order: 8; }
  .patient-line[data-line="9"] { order: 9; }
  
  - Assign the `patient-line--vitals-primary` helper and lock the `order` values so BP, HR, and %SpO₂ stay together on line 8 while downstream vitals remain on their numbered lines.
  - Narrowing the vitals with `.vital-item--compact { justify-self: start; }` keeps the row from wrapping after you shrink the BP inputs.
  Override notes:
  - If nothing changes, check for Tailwind `order-*` utilities in index.html—they override these declarations and must be removed or superseded with more specific selectors.
  - When the vitals still wrap, ensure `.patient-line--vitals` later in the file is not forcing alternative layout overrides; add `.patient-line--vitals-primary { grid-auto-flow: column; }` if necessary.
  */
  display: inline-grid; /* single line layout using CSS grid */
  grid-auto-flow: column;
  align-items: center; /* Vertically center labels & inputs within row */
  column-gap: 0.245rem; /* spacing between row elements */
  overflow-x: auto; /* Enable horizontal scrolling when content exceeds width */
  scroll-behavior: smooth; /* Smooth scrolling when using trackpads */
} /* End .patient-line */

.patient-line::-webkit-scrollbar { /* Custom scrollbar styling for WebKit browsers applied to each sidebar row */
  height: 3px; }

.patient-line { /* Additional scrollbar styling for Firefox & other browsers on each sidebar row */
  scrollbar-width: thin; }

#patient-sidebar .patient-line .sidebar-input { /* Inputs inside rows (e.g., Age #, HR, RR) should stay compact */
  justify-self: start; /* Prevent width from stretching beyond content */
}

#patient-sidebar .patient-line textarea.sidebar-input { /* (textarea width rule) Multi-line fields inside rows (PMH, Allergies, Current Rx's, Indications, S/S) */
  width: 16ch; }

#patient-sidebar .patient-line .sidebar-input.age-input { /* Age input sizing (the Age numeric field, regardless of unit selection) */
  min-width: 6ch;
  max-width: 7ch; /* Prevent wider-than-necessary fields */
}

#patient-sidebar .patient-line .weight-input { /* Weight input field (the numeric entry for patient weight) */
  min-width: 6ch;
  max-width: 8ch; }

#patient-sidebar .patient-line .height-input { /* Height inputs (feet & inches fields on the Weight/Height row) */
  min-width: 3ch;
  max-width: 4ch;
}

#patient-sidebar .patient-line .med-class-select { /* Dropdown selects within rows (future use for medication class selection) */
  width: auto; /* Allow the select to use default width unless overridden */
  min-width: 4.5ch; }

.sidebar-field { /* Shared styling for the label + control pairing on each row (e.g., "PMH:" label plus textarea) */
  display: inline-grid; /* Keeps label & control aligned in row using grid flow */
  grid-auto-flow: column; /* Arrange label then control horizontally */
  align-items: flex-start; /* Align content to top so multi-line labels line up */
  column-gap: 0.0035rem; /* gap between label & control */
  padding: 0;
  min-width: 0; /* Allow container to shrink if needed */
}

.sidebar-field-textarea.sidebar-field-textarea--chips-right { display: grid; grid-template-columns: minmax(0, 16ch) minmax(10ch, auto); gap: 0.6rem; align-items: start; }
.sidebar-field-textarea--chips-right .sidebar-field-row { display: grid; grid-template-columns: minmax(0, 1fr) auto; align-items: flex-start; column-gap: 0.5rem; }
.sidebar-field-textarea--chips-right .sidebar-field-row--input { align-items: stretch; }
.sidebar-field-textarea--chips-right .sidebar-chip-list { min-width: 12ch; }
.sidebar-field-textarea--chips-right .sidebar-chip-ghost { min-width: 22ch; visibility: hidden; }

/*
- The grid layout reserves a second column so the chip list (selected options) can sit to the right of the textarea without nudging the input out of place; reuse the modifier on Allergies, Current Rx's, Indications, and S/S.
- `.sidebar-chip-ghost` keeps the second column width stable when no chips are selected, preventing the textarea from stretching full-width and then snapping smaller once chips appear.
Override notes:
- If the chips remain below the textarea, double-check that `.sidebar-field-heading` is not forcing `width:100%`; remove or override with `.sidebar-field-textarea--chips-right .sidebar-field-heading { width:auto; }`.
- Should the grid columns be too narrow or wide, adjust the `minmax` values; the first column controls the textarea width, while the second column tracks the chip list width.
*/

.sidebar-field .sidebar-label { /* Styling for labels inside the field wrapper (e.g., "Allergies:", "HR:", "Rhythm:") */
  display: inline-grid; /* Keep label text aligned with control */
  align-items: center; /* Center label text vertically */
  justify-items: start;
  margin-bottom: 0; /* Ensure labels do not add extra space below */
  white-space: nowrap; /* Prevent labels from breaking onto multiple lines */
}

.sidebar-field-textarea { /* Wrapper around textarea fields like PMH, Allergies, Current Rx's, Indications, and S/S */
  align-items: flex-start; /* Align the textarea to the top to match label height */
}

.sidebar-field-textarea .sidebar-label { /* Labels specifically for textarea fields (PMH label, Allergies label, etc.) */
  min-width: 0; /* Allow narrow labels so textarea can take available width */
  padding: 0; /* Keep label flush with container */
}

.sidebar-field-heading { /* Container for labels that have trailing chip lists (e.g., PMH label plus chip list); ensure template keeps .sidebar-chip-list sibling to show selections on the right. */
  display: inline-grid; /* Keeps heading & chips on the same line */
  grid-auto-flow: column;
  align-items: center; /* Vertically center heading text */
  column-gap: 0.15rem; /* gap between heading & chips */
  white-space: nowrap; /* Prevent heading from wrapping */
}

.sidebar-field-heading .sidebar-label { /* Label inside heading container (e.g., PMH label when chips are present) */
  justify-self: start; /* Prevent label from stretching */
  white-space: nowrap; /* Keep label on a single line */
}

.sidebar-chip-list { /* Container for multi-select chips (e.g., previously entered PMH values, Allergies selections).
                          When patientData arrays are updated, chips appear here to the right of the input without moving the text box.
                          Example optional override (leave commented) to give the chip rail a fixed width:
  .sidebar-chip-list { width: clamp(14ch, 22vw, 28ch); white-space: nowrap; }
*/
                        
  display: inline-grid; /* Lay chips left-to-right */
  grid-auto-flow: column;
  gap: 0.2rem; /* Small spacing between chips */
  margin-left: 0.4rem; /* Space between label & chip list */
  min-height: 1.1rem; /* Reserve vertical space so row height is stable */
  overflow-x: auto; /* Allow horizontal scrolling when many chips selected */
  padding-bottom: 0.15rem; /* space for scrollbar track */
}

.sidebar-chip-list::-webkit-scrollbar { /* Customize scroll track for chip list in WebKit */
  height: 3px; /* Keep horizontal scrollbar subtle */
}

.sidebar-chip-list.is-empty { /* Hide chip list entirely when no chips exist */
  display: none; /* Prevent empty container from occupying space */
}

.sidebar-chip { /* Individual chip styling representing each selected PMH/Allergy/Current Rx/Indication entry */
  display: inline-grid; /* Show chip text inline with icon (if any) */
  grid-auto-flow: column;
  align-items: center; /* Center text vertically within chip */
  padding: 0.05rem 0.2rem;
  font-size: 0.45em;
  line-height: 1; /* Keep chip content tight without extra vertical space */
  letter-spacing: 0.02em;
  border-radius: 0.3rem; /* Rounded chip corners */
  background: #fff7ed;
  border: 1px solid #1da9ea;
  color: #ab0000;
  justify-content: start; /* Keep chip width based on content */
}

.sidebar-chip strong { /* Emphasized text within chips, e.g., abbreviations or critical flags inside the chip */
  font-weight: 700;
}

body.dark-mode .sidebar-chip { /* Dark theme variant of chips for PMH/Allergies/Current Rx's/Indications selections */
  background: #451a03;
  border-color: #fb923c;
  color: #fdba74;
}

@supports (overflow: hidden) { /* Feature query to ensure clipping works where supported */
  .sidebar-chip { /* Limit chip overflow to avoid layout stretching */
    overflow: hidden; /* Hide overflow text for chips with long strings */
    text-overflow: ellipsis; /* Add ellipsis to signify truncated text */
  } /* End chip overflow adjustments */
} /* End @supports for chip overflow */

.sidebar-input-flex { /* Wrapper used when a label sits above its control (e.g., PMH textarea stack) */
  justify-self: stretch; /* Allow wrapper to span available space */
  min-width: 0; /* Allow shrink when horizontal space is constrained */
  display: grid; /* Stack label and control vertically */
  grid-auto-flow: row; /* Ensure label sits above control */
  row-gap: 0.35rem;
}

.sidebar-field-vital { /* Wrapper specifically for VS entries (BP, HR, SpO2, EtCO2, RR, BGL, Pupils, Lung Sounds, GCS, A&O) */
  align-items: center; /* Align vital label & field along baseline */
}

.sidebar-field-vital .sidebar-label { /* Label next to each vital entry (e.g., "HR:", "% SpO2:", "EtCO2:") */
  justify-self: start; /* Keep label width fixed to fit text */
  min-width: 5.5rem; /* Ensure label text is readable without wrapping */
  white-space: nowrap; /* Prevent label from splitting into multiple lines */
}

.sidebar-field-vital .sidebar-input { /* Vital input boxes (e.g., HR bpm box, RR respiration box, BGL entry) */
  justify-self: start; /* Keep input width controlled by min/max width */
  min-width: 4ch; /* Provide space for up to three-digit values */
  max-width: 6ch; /* Prevent fields from stretching too wide */
}

.vital-input { /* General vital input fallback covering BP systolic/diastolic, EtCO2 numeric, RR numeric, BGL value */
  justify-self: start; /* Keep width consistent for these controls */
  min-width: 4ch; /* Enough room for vital numbers */
  max-width: 6ch; /* Prevent overly wide fields */
}

#patient-sidebar .patient-line .vital-input { /* Align vital numeric inputs (HR/ RR/ BGL etc.) in their respective rows */
  text-align: right; /* Right align numbers for consistent visual alignment */
}

.vital-select { /* Dropdown fields within vital rows (e.g., Pupils reaction dropdown, Lung Sounds dropdown) */
  justify-self: start; /* Keep select width tight */
}

.vital-row { /* Container for grouped vital items on lines 8-11 (BP/HR/SpO2, EtCO2/RR/BGL, Pupils/Lung Sounds, GCS/A&O) */
  display: inline-grid; /* Lay out vitals side-by-side */
  grid-auto-flow: column;
  align-items: center; /* Keep labels & inputs aligned vertically */
  column-gap: 0.45rem; /* gap between vitals */
}

.vital-row:last-child { /* Ensure last vital row has consistent spacing */
  margin-bottom: 0; /* Avoid extra space after final vital group */
}

.vital-item { /* Individual vital item container (e.g., the entire "HR:" label + input pair) */
  display: inline-grid; /* Keep label & control aligned horizontally */
  grid-auto-flow: column;
  align-items: center; /* Vertically center label & control */
  column-gap: 0.35rem; /* gap between label & field */
  justify-content: start;
  min-width: 0; /* Allow shrink if space gets tight */
}

.vital-item-pupils .vital-mini-select,
.vital-item-gcs .vital-mini-select { /* Special case for wider dropdowns: Pupils assessment and GCS dropdown fields */
  min-width: 2.6rem; /* Provide extra room for longer values */
}

.vital-label { /* Label in front of each vital field (e.g., "BP:", "% SpO2:", "GCS:") */
  font-weight: 600;
  font-size: 0.82rem;
  white-space: nowrap; /* Prevent labels from breaking lines */
}

.vital-mini-select { /* Square dropdowns used across vital rows (Pupils reaction, Lung Sounds, modifier selects) */
  width: 2.1rem;
  height: 2.1rem; /* Keep height equal to width for perfect square */
  padding: 0; /* Remove padding so icon sits centered */
  border-radius: 0.3rem;
  appearance: none; /* Remove default OS styles */
  text-indent: -9999px; /* Hide text values to show only chevron */
  background-image: url("data:image/svg+xml,%3Csvg width='16' height='16' fill='none' stroke='%236b7280' stroke-width='2' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M4 6l4 4 4-4'/%3E%3C/svg%3E"); /* Chevron icon */
  background-repeat: no-repeat; /* Prevent icon tiling */
  background-position: center; /* Keep icon centered */
  background-color: #fff;
  border: 1px solid #d1d5db;
  cursor: pointer; /* Indicate dropdown is interactive */
}

.vital-mini-select:focus-visible { /* Keyboard focus styling for dropdowns, ensuring Pupils/GCS combos show clear focus ring */
  outline: 2px solid #2563eb;
  outline-offset: 2px; /* Slight offset for clarity */
}

.unit-input { /* Wrapper for inputs that show a measurement suffix, e.g., BP mmHg stack, EtCO2 mmHg, SpO2 percent */
  position: relative; /* Allow suffix to be positioned within the field */
  display: grid; /* Keep input & suffix aligned via grid */
  align-items: center; /* Vertically center suffix with input text */
  justify-self: stretch; /* Prevent wrapper from shrinking unevenly */
  min-width: 0; /* Allow shrink if necessary */
}

.unit-input .sidebar-input { /* Input inside a unit wrapper (e.g., numeric component of BP, EtCO2, SpO2) */
  padding-right: 0.4rem; /* Leave room for suffix text on the right */
  text-align: right; /* Align numeric values to the right for readability */
}

.unit-suffix { /* Measurement suffix that overlays the input (e.g., "mmHg", "%", "EtCO2" label overlay) */
  position: absolute; /* Allow suffix to sit inside the input field */
  top: 50%; /* Vertically align the suffix */
  right: 0.4rem; /* Place suffix near the right edge */
  transform: translateY(-50%); /* Perfectly center suffix vertically */
  font-size: 0.62rem; /* Use small type so units do not dominate field */
  font-weight: 600; /* Slightly bold so unit is legible */
  color: #475569; /* Neutral slate color to differentiate from data */
  pointer-events: none; /* Allow clicks to pass through to input */
  text-transform: uppercase; /* Present units in uppercase for consistency */
  opacity: 0; /* Hide suffix until field has a value */
  transition: opacity 0.15s ease; /* Smooth appearance when value is entered */
} 

.unit-input[data-has-value="true"] .unit-suffix { /* Show suffix when input has a value so units appear beside entries */
  opacity: 1; /* Fade suffix in */
}

.unit-suffix sub { /* Styling for subset of unit text (e.g., subscript in SpO₂ label) */
  font-size: 0.6rem; /* Reduce size for subscript characters */
}

body.dark-mode .unit-suffix { /* Dark theme adjustments for unit suffix (affects all measurement overlays in vitals rows) */
  color: #cbd5f5; /* Lighten suffix so it remains visible on dark background */
}

.bp-stack { /* Container for systolic/diastolic stacked inputs in the "BP" portion of vitals line 8 */
  position: relative; /* Prepare for pseudo elements if needed */
  display: grid; /* Stack systolic & diastolic vertically */
  grid-auto-flow: row; /* Align inputs vertically within stack */
  border: 1px solid #d1d5db; /* Neutral border to match other inputs */
  border-radius: 0.4rem; /* Rounded corners consistent with design */
  background: #75f79a;
  min-width: 0.1rem; /* Keep stack wide enough for two-digit values */
}

.bp-stack:focus-within { /* Highlight BP stack when either systolic or diastolic field is focused */
  border-color: #2563eb; /* Blue border to show focus state */
  box-shadow: 0 0 0 2px rgb(37 99 235 / 20%); /* Add glow for extra emphasis */
}
/*
@supports (overflow: hidden) {  Ensure overflow clipping works where supported 
  .bp-stack {  BP stack overflow control to keep systolic/diastolic boxed within rounded corners
     overflow: hidden;  Prevent content from spilling beyond rounded corners
  }
} */

/*
NEW CODE: */
.bp-stack.bp-stack--narrow {
  max-width: 5.5rem;
}
.bp-input.bp-input--compact {
  padding: 0.2rem 0.25rem;
  font-size: 0.82rem;
  min-height: 1.6rem; }
/*
- Attach `bp-stack--narrow` and `bp-input--compact` (as shown in index.html comments) when you want the BP fields to shrink without affecting other pt sidebar inputs; the new classes let you dial the width & padding down independently.
- Reducing the minimum height complements the stacked Age toggles, so the vitals line settles into a tighter row while still respecting touch targets.
Override notes:
- If the width refuses to cap, check for layout overrides on `.bp-stack` later in this file (line 270) and add `.bp-stack--narrow { justify-self: start !important; }` to override.
- When the compact classes affect other vitals unintentionally, ensure you only append the modifiers to the BP markup; CSS inheritance alone will not apply them elsewhere unless you reuse the class names.
*/

.bp-input { /* Input fields inside the bp stack (sys on top, diastolic below) */
  border: none; /* "none" avoids double lines */
  background: transparent; /* Let stack background show through */
  padding: 0.2rem 0.2rem; /* Provide comfortable tap target */
  text-align: center; /* Center numbers */
  font-size: 0.9rem; /* Slightly larger for key vital values */
  font-weight: 600;
  color: #1f2937;
  width: 100%; /* Ensure input spans stack width */
  min-height: 1rem; /* Keep field tall enough for finger taps */
  cursor: text; } /* Indicate field is editable */

.bp-input:focus-visible { /* Focus styling when the BP systolic or diastolic field is active */
  outline: none; /* Remove default outline to rely on stack glow */
  background: #eef2ff;
}

.bp-divider-line {
  display: block; /* Render as full-width block */
  width: 100%; /* Span entire stack */
  height: 1px; /* Thin divider line */
  background: #d1d5db;
}

/*
.bp-stack { /* Adjust BP stack layout on larger screens 
    display: inline-grid;  Align systolic/diastolic side by side if needed
    grid-auto-flow: column;  Switch from vertical stacking to horizontal 
    align-items: center;  Align values vertically 
    gap: 0.3rem;
    padding: 0.25rem 0.4rem;
    min-width: 5.8rem;
    border-radius: 0.6rem;
  }  End BP stack media adjustments

  .bp-stack .bp-divider-line {  Divider styling when stack is horizontal 
    width: 1px;  Keep divider a thin strip 
    height: auto;  Allow divider to span the height of the stack 
    align-self: stretch;  Stretch divider between systolic and diastolic 
  }

  .bp-input { /* Input styling inside horizontal BP stack 
    padding: 0.25rem 0.3rem; /* Reduce padding once fields are side-by-side 
    font-size: 1rem;
    line-height: 1.2; /* Maintain comfortable line height 
  } */

  .bp-stack:hover { /* Hover state for BP stack on larger screens */
    border-color: #60a5fa;
  } 

  .bp-stack:focus-within { /* horizontal focus styling */
    border-color: #2563eb;
    box-shadow: 0 0 0 2px rgb(37 99 235 / 28%); /* Intensify glow for accessibility */
  }

.ekg-module { /* Wrapper for the Rhythm (line 12) and Modifier (line 13) rows in the sidebar */
  display: grid; /* Stack rows vertically */
  grid-auto-flow: row; /* Maintain column layout */
  row-gap: 0.85rem; /* gap between rhythm & modifier groups */
}

.ekg-module-row { /* Individual EKG row container (applies to both Rhythm and Modifier row layouts) */
  display: inline-grid; /* Keep row elements inline and padded */
  grid-auto-flow: column;
  align-items: center; /* Align controls & labels */
  column-gap: 0.6rem; /* gap between inputs */
}

.ekg-row-main { /* Wrapper for the main Rhythm dropdown/inputs and the Modifier text area */
  justify-self: stretch; /* Prevent stretching */
  min-width: 0; /* Allow shrink within layout */
  display: grid; /* Stack label and controls vertically */
  grid-auto-flow: row; /* Arrange label above control */
  align-items: stretch; /* Make control fill available width within wrapper */
  row-gap: 0.35rem; /* gap between label & control */
}

.ekg-row-heading { /* Header row for Rhythm dropdown, including label and optional action buttons */
  display: inline-grid; /* Keep label and buttons in one line */
  grid-auto-flow: column;
  align-items: center; /* Vertically center heading contents */
  column-gap: 0.45rem; /* Provide space between label and actions */
}

.ekg-row-main .sidebar-label { /* Label inside the Rhythm/Modifier rows (e.g., "Rhythm:" text) */
  margin-bottom: 0; /* Ensure no additional spacing below label */
  white-space: nowrap; /* Keep label on single line */
}

.ekg-row-controls { /* Container for Rhythm input, optional dropdowns, and modifier chips on lines 12-13 */
  display: inline-grid; /* Align controls horizontally */
  grid-auto-flow: column;
  align-items: center; /* Vertically center each control */
  column-gap: 0.4rem; /* Provide spacing between controls */
}

.ekg-autocomplete { /* Wrapper for the Rhythm autocomplete field (line 12) */
  justify-self: start; /* Keep width determined by content */
  min-width: 10ch; /* Enough width for short rhythm names */
}

.ekg-autocomplete .sidebar-input { /* Input inside Rhythm autocomplete (controls the width of the rhythm text entry) */
  width: 12ch; /* Provide fixed width to keep field compact */
}

.ekg-preview-shell { /* Preview area for the selected rhythm image shown beside the Rhythm row */
  justify-self: start; /* Keep preview from stretching */
  width: 96px; /* Match original preview dimensions */
  height: 60px; /* Maintain aspect ratio for preview */
  border-radius: 0.45rem; /* Rounded corners consistent with design */
  background: #0b1220; /* Dark background to highlight waveform */
  border: 1px solid #1f2937; /* Subtle border to frame the preview */
  display: grid; /* Center the content inside */
  place-items: center; /* Center waveform content */
}

.ekg-preview-img { /* Image element within the rhythm preview shell */
  width: 100%; /* Scale image to container width */
  height: 100%; /* Maintain coverage of container height */
  object-fit: cover; /* Crop image to fill container */
  display: block; /* Remove inline spacing around image */
  transition: opacity 0.2s ease; /* Smooth fade in/out when switching images */
}

.ekg-preview-img.is-empty { /* Placeholder state when no rhythm preview image has been selected */
  opacity: 0; /* Hide placeholder until data exists */
}

@supports (overflow: hidden) { /* Ensure clip works only when supported */
  .ekg-preview-shell { /* Prevent waveform preview from bleeding outside rounded corners */
    overflow: hidden; /* Clip content to rounded border */
  }
} /* End @supports for preview */

.ekg-info-button { /* Information button next to the Rhythm selector (line 12) */
  justify-self: start; /* Keep button from expanding */
  width: 1.9rem; /* Set square footprint */
  height: 1.9rem; /* Match width for perfect circle */
  border-radius: 1px; /* Fully round button */
  border: 999px solid #94a3b8;
  background: #fff;
  color: #1e293b; /* Slate text color */
  font-size: 0.85rem; /* font size for icon/text */
  font-weight: 600;
  cursor: pointer; /* Show clickable cursor */
  display: inline-grid; /* Center icon inside button */
  place-items: center; /* Center icon */
  transition: background-color 0.2s ease, color 0.2s ease, border-color 0.2s ease; /* Smooth hover/focus transitions */
}

.ekg-info-button:disabled { /* Disabled state for the rhythm info button when no rhythm is chosen */
  opacity: 0.45; /* Dim button to indicate non-interactive state */
  cursor: default; /* Remove pointer cursor */
  border-color: #cbd5f5; /* Lighten border when inactive */
}

@supports (cursor: not-allowed) { /* Only apply if browser supports custom cursors */
  .ekg-info-button:disabled { /* Disabled button cursor for the rhythm info button */
    cursor: not-allowed; /* Use standard disabled cursor */
  } /* End cursor override */
} /* End @supports */

.ekg-info-button:not(:disabled):hover { /* Hover styling when rhythm info button is active */
  background: #2563eb; /* Fill button with primary blue */
  color: #fff; /* Switch icon/text to white */
  border-color: #2563eb; /* Match border with background */
}

.ekg-info-button:not(:disabled):focus-visible { /* Keyboard focus feedback for rhythm info button */
  outline: 2px solid #2563eb; /* Blue outline for accessibility */
  outline-offset: 2px; /* Offset outline for clarity */
}

.ekg-summary-text { /* Text summary beneath Rhythm selector summarizing current selection */
  justify-self: stretch; /* Allow summary to grow while maintaining base width */
  min-width: 0; /* Permit shrink when layout tightens */
  width: min(100%, 14rem); /* Provide baseline width before wrapping */
  font-size: 0.78rem;
  color: #475569;
  line-height: 1.3;
}

.ekg-summary-text.is-empty { /* Hide rhythm summary text when no rhythm has been provided */
  display: none; /* Prevent empty block from taking space */
}

body.dark-mode .ekg-summary-text { /* Dark theme summary adjustments for Rhythm summary text */
  color: #cbd5f5; /* Lighten text for readability on dark background */
}

.sidebar-section-header { /* Header row within each sidebar section, e.g., label plus help button for Rhythm section */
  display: grid; /* Align items horizontally */
  grid-auto-flow: column;
  align-items: center; /* Vertically center contents */
  justify-content: space-between; /* Push help button to far edge */
  column-gap: 0.5rem; /* gap between header elements */
}

.sidebar-help-button { /* Inline help button next to labels such as Rhythm or Modifier */
  border: none; /* Remove default button border */
  background: none; /* Keep background transparent */
  color: #2563eb; /* Primary blue for call-to-action */
  font-size: 0.85rem; /* Slightly smaller text to match labels */
  padding: 0; /* Removes padding */
  cursor: pointer; /* Indicate interactivity */
  text-decoration: underline; /* Underline */
}

.sidebar-help-button:hover { /* Hover state for sidebar help buttons (e.g., Rhythm help) */
  color: #1d4ed8; /* Darken blue on hover */
}

.sidebar-help-button:focus-visible { /* Keyboard focus styling for sidebar help buttons */
  outline: 2px solid #2563eb; /* Add blue outline for accessibility */
  outline-offset: 2px; /* Offset outline for improved visibility */
  border-radius: 0.25rem; /* Slight rounding around focus outline */
}

.sidebar-demographics-item .sidebar-label { /* Shared label styling for early rows (Sex:, Age:, Weight:, Height:) */
  min-width: 0.25rem; /* Reserve space for short labels like “Sex” */
  margin-bottom: 0; /* Keep label tight against controls */
  white-space: nowrap; /* Prevent label from wrapping */
}

@supports (text-decoration-thickness: 1px) { /* Feature detection for modern underline control */
  .sidebar-help-button { /* Enhance underlines where supported */
    text-decoration-thickness: 1px; /* Make underline sharper without being too bold */
  }
} /* End @supports underline */

.sidebar-demographics-row,
#patient-sidebar .patient-line--demographics { /* Rows that hold demographic items */
  display: grid; /* Lay out demographic items horizontally */
  grid-auto-flow: column;
  align-items: stretch; /* Ensure items fill the row height */
  column-gap: 0.85rem; /* spacing between demographic groups */
}

.sidebar-demographics-row:last-child { /* Final demographic row adjustments */
  margin-bottom: 0; /* Remove bottom spacing at end of section */
}

.sidebar-demographics-item { /* Container for individual demographic items */
  min-width: 7rem; /* Allow items to grow but keep a usable minimum width */
  display: grid; /* Align label & control horizontally */
  grid-template-columns: minmax(0, auto) minmax(0, 1fr);
  align-items: stretch; /* Center content vertically */
  column-gap: 0.1rem; /* (label & control) */
  row-gap: 0.25rem; } /* Permit internal wrapping when needed */
  /* To guarantee the Age category stays on the same line as Sex, keep both containers within the same data-line (1) in index.html and optionally reduce
     the minimum width of the Age wrapper like so:
     .sidebar-demographics-item.sidebar-demographics-item-age {
       min-width: 12rem;
     }
*/
.sidebar-demographics-item.sidebar-demographics-item-sex { /* Sex selector specifics */
  justify-self: start; /* Keep width tight around buttons */
  gap: 0.1rem; /* Provide room between toggle buttons */
  grid-auto-flow: column; /* Prevent sex buttons from wrapping */
}

.patient-line[data-line="1"] { order: 1; } /* Guarantee Sex/Age row appears first; update this order if the data-line assignments change. */
.patient-line[data-line="2"] { order: 2; } /* Weight/Height on second row; change order value if you relocate the Weight/Height row. */
.patient-line[data-line="3"] { order: 3; } /* PMH occupies third row; adjust this to reposition PMH elsewhere. */
.patient-line[data-line="4"] { order: 4; } /* Allergies on fourth row; modify order to move Allergies to a different line. */
.patient-line[data-line="5"] { order: 5; } /* Current Rx’s on fifth row; alter order to reposition Current Rx's. */
.patient-line[data-line="6"] { order: 6; } /* Indications on sixth row; change order value to relocate Indications. */
.patient-line[data-line="7"] { order: 7; } /* S/S on seventh row; adjust order if Symptoms need a different placement */
.patient-line[data-line="8"] { order: 8; } /* BP/HR/SpO2 on eighth row; ensure data-line="8" stays assigned to this row in markup. */
.patient-line[data-line="9"] { order: 9; } /* EtCO2/RR/BGL on ninth row; change order to regroup if necessary. */
.patient-line[data-line="10"] { order: 10; } /* Pupils/Lung Sounds on row ten; update order when reassigning categories. */
.patient-line[data-line="11"] { order: 11; } /* GCS/A&O on row eleven; adjust if neurological assessment moves. */
.patient-line[data-line="12"] { order: 12; } /* Rhythm on row twelve; maintain this when rhythm row is repositioned. */
.patient-line[data-line="13"] { order: 13; } /* Modifier on row thirteen; change order if the modifier row is moved. */

@media (min-width: 768px) { /* Tablet/desktop enhancements */
  .sidebar-section .vital-row { /* Adjust vital rows on larger screens */
    grid-auto-flow: column; /* Keep vital row items on one line */
    align-items: center; /* Center fields vertically */
    column-gap: clamp(0.5rem, 1vw, 0.85rem); /* Scale gap based on viewport width */
  }

  .sidebar-section .vital-item { /* Vital item spacing on larger screens */
    justify-content: start; /* Allow slight growth while keeping compact */
    min-width: 0; /* Permit shrink */
    gap: clamp(0.35rem, 0.9vw, 0.55rem); /* Responsive spacing around labels */
  }

  .sidebar-section .vital-label { /* Vital labels on larger screens */
    font-size: 10.9rem; /* Make labels a bit larger for readability */
    letter-spacing: 0.01em; /* Slight tracking to improve legibility */
  }

  .sidebar-section .unit-input { /* Unit wrapper adjustments on larger screens */
    justify-self: stretch; /* Allow wrapper to grow and fill row */
    min-width: 0; /* Allow shrink so layout remains flexible */
  } /* End unit wrapper media adjustments */

  .sidebar-section .unit-input .sidebar-input { /* Input sizing inside unit wrappers */
    font-size: 0.92rem; /* Slightly larger text for desktop readability */
    letter-spacing: 0.01em; /* Improve legibility with subtle tracking */
  } /* End unit input adjustments */

  .sidebar-section .unit-input:focus-within .unit-suffix { /* Highlight suffix when focused */
    color: #2563eb; /* Tint suffix to match focused input */
  } /* End suffix focus adjustments */

  .sidebar-section .unit-suffix { /* Unit suffix styling on larger screens */
    right: 0.75rem; /* Adjust horizontal offset for larger inputs */
    font-size: 0.74rem; /* Increase size for readability */
    letter-spacing: 0.05em; /* Give uppercase units a bit of breathing room */
  } /* End unit suffix adjustments */

  .age-unit-toggle-group { /* Spacing for age unit toggle group */
    gap: 0.45rem; /* Provide wider spacing between toggles on desktop */
  } /* End toggle group spacing */

  .age-unit-toggle { /* Toggle styling on larger screens */
    padding: 0.25rem 0.75rem; /* Increase padding for easier interaction */
    border-radius: 999px; /* Make toggles pill-shaped for aesthetics */
    transition: background-color 0.16s ease, color 0.16s ease, border-color 0.16s ease, transform 0.16s ease; /* Smooth interactive feedback */
  } /* End toggle adjustments */

  .age-unit-toggle:hover,
  .age-unit-toggle:focus-visible { /* Hover and focus feedback for toggles */
    transform: translateY(-1px); /* Provide subtle lift effect */
  } /* End hover/focus transitions */

  .age-unit-toggle:active { /* Active state for toggles when pressed */
    transform: translateY(0); /* Reset lift when actively pressed */
    background: rgb(37 99 235 / 12%); /* Slight blue tint to acknowledge press */
  } /* End active state */
} /* End media query */

.sidebar-demographics-item-height { /* Wrapper for height fields */
  gap: 0.6rem; /* Maintain spacing between label and inputs */
  align-items: center; /* Align height fields vertically */
} /* End height wrapper */

.height-inline-inputs { /* Container for ft/in inline pair */
  display: inline-grid; /* Keep foot & inch inputs inline */
  grid-auto-flow: column;
  align-items: center; /* Align inputs vertically */
  column-gap: 0.35rem; /* Add space between fields */
}

.height-unit-text { /* Text label such as “ft” or “in” */
  font-size: 0.85rem; /* Match label size for consistency */
  color: #4b5563; /* Neutral text color */
}

.height-input { /* Numeric field for height values */
  justify-self: start; /* Keep width tight */
}

.height-input--compact { /* Compact variant of height input */
  width: 2.75rem; /* Provide precise width for one- or two-digit values */
  padding: 0.2rem 0.35rem; /* Adjust padding to maintain square feel */
  font-size: 0.85rem; /* Keep text consistent with other inputs */
}

body.dark-mode .height-unit-text { /* Dark theme adjustment for unit text */
  color: #d1d5db; /* Lighten units so they remain legible on dark background */
}

.sidebar-label { /* Global label styling in patient sidebar */
  display: block; /* Ensure labels occupy full line above controls when stacked */
  font-size: 0.875rem; /* Standard font size for readability */
  line-height: 1.25rem; /* Maintain vertical rhythm */
  font-weight: 500; /* Semi-bold weight */
  color: #374151; /* Slate text */
  margin-bottom: 0.25rem; } /* Provide space between label & input */
